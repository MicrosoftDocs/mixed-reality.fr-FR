---
title: Module MR Learning ASA Azure spatiale de point d’ancrage sur HoloLens 2
description: Suivez ce cours pour découvrir comment implémenter la reconnaissance faciale Azure au sein d’une application de réalité mixte.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: réalité mixte, unity, tutoriel, hololens
ms.openlocfilehash: f8a52660fe05b6ed4508321ed246b8e299b75bca
ms.sourcegitcommit: cf9f8ebbca0301e9d277853771ff6e47701ba1c1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/02/2019
ms.locfileid: "67523336"
---
# <a name="2-saving-retrieving-and-sharing-azure-spatial-anchors"></a><span data-ttu-id="e4ef4-104">2. L’enregistrement, la récupération et le partage des ancres Spatial Azure</span><span class="sxs-lookup"><span data-stu-id="e4ef4-104">2. Saving, retrieving, and sharing Azure Spatial Anchors</span></span>

<span data-ttu-id="e4ef4-105">Dans ce didacticiel, nous allez apprendre à enregistrer notre ancres Spatial Azure entre plusieurs sessions d’application en enregistrant nos informations d’ancrage sur le disque de la HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-105">In this tutorial, we will learn how to save our Azure Spatial Anchors across multiple app sessions by saving our anchor information to the HoloLens 2's disk.</span></span> <span data-ttu-id="e4ef4-106">Nous allez également apprendre à partager ces informations d’ancrage à d’autres périphériques pour un alignement d’ancrage sur plusieurs appareils.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-106">We will also learn how to share this anchor information to other devices for a multi-device anchor alignment.</span></span>

## <a name="objectives"></a><span data-ttu-id="e4ef4-107">Objectifs</span><span class="sxs-lookup"><span data-stu-id="e4ef4-107">Objectives</span></span>

* <span data-ttu-id="e4ef4-108">Découvrez comment enregistrer et récupérer les informations d’ancrage Spatial Azure à partir du disque local HoloLens 2, pour la persistance entre les sessions de l’application</span><span class="sxs-lookup"><span data-stu-id="e4ef4-108">Learn how to save and retrieve Azure Spatial Anchor information from the HoloLens 2 local disk, for persistence between app sessions</span></span>

* <span data-ttu-id="e4ef4-109">Découvrez comment partager des informations d’ancrage Spatial Azure entre les utilisateurs dans un scénario multi-device</span><span class="sxs-lookup"><span data-stu-id="e4ef4-109">Learn how to share Azure Spatial Anchor information between users in a multi-device scenario</span></span>

  

## <a name="instructions"></a><span data-ttu-id="e4ef4-110">Instructions</span><span class="sxs-lookup"><span data-stu-id="e4ef4-110">Instructions</span></span>

### <a name="persist-azure-anchors-between-app-sessions---save-anchor-id-to-disk"></a><span data-ttu-id="e4ef4-111">Conserver les ancres Azure entre les Sessions de l’application - ID d’ancrage sur le disque de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="e4ef4-111">Persist Azure Anchors Between App Sessions - Save Anchor ID to Disk</span></span>

1. <span data-ttu-id="e4ef4-112">Recherchez et ajoutez le préfabriqué SaveAnchorToDisk à votre scène.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-112">Search for and add the SaveAnchorToDisk prefab to your scene.</span></span> <span data-ttu-id="e4ef4-113">Ceux-ci incluent les deux boutons, un bouton pour l’enregistrement de n’importe quel ID de point d’ancrage Azure disponible sur le disque 2 de HoloLens et l’autre pour la récupération de n’importe quel ID à partir du disque.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-113">These include two buttons, one button for saving any available Azure Anchor IDs to the HoloLens 2 disk, and another for retrieving any IDs from the disk.</span></span>

   ![module2chapter2step1im](images/module2chapter2step1im.PNG)

2. <span data-ttu-id="e4ef4-115">Configurer chaque bouton en suivant les instructions ci-dessous</span><span class="sxs-lookup"><span data-stu-id="e4ef4-115">Configure Each button according to the instructions below</span></span>
   - <span data-ttu-id="e4ef4-116">Pour le bouton SaveToDisk, créez un nouvel événement sous le déclencheur d’événement bouton enfoncé, ainsi que le déclencheur d’événement sur cliquez sur.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-116">For the Button named SaveToDisk, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="e4ef4-117">Faites glisser l’objet ParentAnchor dans le champ vide et affecter la méthode SaveAzureAnchorIDToDisk() à partir du composant de l’objet ParentAnchor ASAmoduleScript.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-117">Drag the ParentAnchor object into the empty field, and assign the SaveAzureAnchorIDToDisk() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>
   
     > <span data-ttu-id="e4ef4-118">Remarque : certains boutons peuvent apparaître qui se chevauchent les autres boutons de la scène.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-118">Note: some of the buttons may appear overlapping the other buttons in the scene.</span></span> <span data-ttu-id="e4ef4-119">N’hésitez pas à ajuster le positionnement du bouton.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-119">Feel free to adjust the button's positioning.</span></span>
   

  ![module2chapter2step2aim](images/module2chapter2step2aim.PNG)

![module2chapter2step2aim](images/module2chapter2step2bim.PNG)

![module2chapter2step2aim](images/module2chapter2step2cim.PNG)

   - <span data-ttu-id="e4ef4-123">Pour le bouton GetFromDisk, créez un nouvel événement sous le déclencheur d’événement bouton enfoncé, ainsi que le déclencheur d’événement sur cliquez sur.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-123">For the Button named GetFromDisk, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="e4ef4-124">Faites glisser l’objet ParentAnchor dans le champ vide et affecter la méthode LoadAzureAnchorIDsFromDisk() à partir du composant de l’objet ParentAnchor ASAmoduleScript.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-124">Drag the ParentAnchor object into the empty field, and assign the LoadAzureAnchorIDsFromDisk() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>

3. <span data-ttu-id="e4ef4-125">Suivez les instructions à partir de 1 Tutoiral pour générer l’application mis à jour sur votre appareil.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-125">Follow the instructions from Tutoiral 1 to build the updated application to your device.</span></span> <span data-ttu-id="e4ef4-126">Après avoir appuyé sur le bouton Créer une ancre de Azure, comme vous l’avez fait dans la leçon précédente, vous pouvez maintenant enregistrer l’ID d’ancrage de Azure sur le disque en appuyant sur l’enregistrement au bouton du disque.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-126">After pressing the Create Azure Anchor button, as you did in the previous lesson, you may now save the Azure Anchor ID to disk by pressing the save to disk button.</span></span>

4. <span data-ttu-id="e4ef4-127">Redémarrer l’application et démarrer la Session d’Azure, appuyez sur les ID d’ancrage de charge, puis appuyez sur le point d’ancrage Azure Rechercher pour localiser le point d’ancrage associé au code que nous avons enregistré sur le disque.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-127">Restart the application, start the Azure Session, Press Load Anchor ID, and then press Locate Azure Anchor to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="e4ef4-128">La scène entière doit maintenant s’aligner dans sa position, à l’emplacement vous avez enregistré le point d’ancrage précédemment !</span><span class="sxs-lookup"><span data-stu-id="e4ef4-128">The entire scene should now snap into position, at the location you saved the anchor previously!</span></span>

### <a name="share-azure-anchors-between-multiple-devices"></a><span data-ttu-id="e4ef4-129">Partager des points d’ancrage Azure entre plusieurs appareils</span><span class="sxs-lookup"><span data-stu-id="e4ef4-129">Share Azure Anchors between multiple devices</span></span>

<span data-ttu-id="e4ef4-130">Dans cette section, nous allez apprendre à partager l’ID d’ancrage de Azure entre plusieurs appareils.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-130">In this section, we'll learn how to share the Azure Anchor ID between multiple devices.</span></span> <span data-ttu-id="e4ef4-131">Ainsi, plusieurs périphériques interroger Azure pour le même ID d’ancrage, ce qui permet de notre hologrammes ancrés et des scènes SPATIALEMENT aligné.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-131">This will allow multiple devices to query Azure for the same anchor ID, allowing our anchored holograms and scenes to be spatially aligned.</span></span> <span data-ttu-id="e4ef4-132">Alignement spatial (voir les mêmes hologrammes dans le même emplacement physique entre plusieurs appareils) est les expériences partagées clés en local dans les 2 HoloLens.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-132">Spatial alignment (seeing the same holograms in the same physical location between multiple devices) is key to local shared experiences in the HoloLens 2.</span></span> <span data-ttu-id="e4ef4-133">Il existe plusieurs façons pour transférer des informations concernant les ID azure entre les appareils, y compris les méthodes décrites dans les expériences partagées ancres Spatial Azure didacticiels (TODO : ajouter un lien.) Cet exemple utilise un service web simple pour charger et télécharger des ID d’ancrage entre les appareils.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-133">There are many ways to transfer information regarding azure IDs between devices, including methods outlined in the Azure Spatial Anchors shared experiences tutorials (TODO: add link.) This example uses a simple web service to upload and download Anchor IDs between devices.</span></span>

1. <span data-ttu-id="e4ef4-134">Ajoutez le préfabriqué ShareAnchor dans votre hiérarchie.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-134">Add the ShareAnchor prefab into your hierarchy.</span></span> <span data-ttu-id="e4ef4-135">Cette préfabriqué ajoute deux nouveaux boutons à votre scène ; un pour le chargement des informations sur l’ID d’ancrage et l’autre pour le téléchargement des informations d’ID de l’ancrage.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-135">This prefab adds two new buttons to your scene; one for uploading anchor ID information and another for downloading anchor ID information.</span></span> 

   ![module2chapter2step5im](images/module2chapter2step5im.PNG)

2. <span data-ttu-id="e4ef4-137">Configurer chaque bouton en suivant les instructions ci-dessous</span><span class="sxs-lookup"><span data-stu-id="e4ef4-137">Configure Each button according to the instructions below</span></span>

   - <span data-ttu-id="e4ef4-138">Pour le bouton, SendSharedAnchor, créez un nouvel événement sous le déclencheur d’événement bouton enfoncé, ainsi que le déclencheur d’événement sur cliquez sur.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-138">For the Button named, SendSharedAnchor, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="e4ef4-139">Faites glisser l’objet ParentAnchor dans le champ vide et affecter la méthode ShareAnchor() à partir du composant de l’objet ParentAnchor ASAmoduleScript.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-139">Drag the ParentAnchor object into the empty field, and assign the ShareAnchor() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>

     ![module2chapter2step6aim](images/module2chapter2step6aim.PNG)

     ![module2chapter2step6bim](images/module2chapter2step6bim.PNG)

     

   - <span data-ttu-id="e4ef4-142">Pour le bouton, GetSharedAnchor, créez un nouvel événement sous le déclencheur d’événement bouton enfoncé, ainsi que le déclencheur d’événement sur cliquez sur.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-142">For the Button named, GetSharedAnchor, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="e4ef4-143">Faites glisser l’objet ParentAnchor dans le champ vide et affecter la méthode GetSharedAzureAnchor() à partir du composant de l’objet ParentAnchor ASAmoduleScript.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-143">Drag the ParentAnchor object into the empty field, and assign the GetSharedAzureAnchor() method from the ParentAnchor object's ASAmoduleScript component.</span></span>

3. <span data-ttu-id="e4ef4-144">Suivez les instructions à partir de [didacticiel 1](mrlearning-base-ch1.md).</span><span class="sxs-lookup"><span data-stu-id="e4ef4-144">Follow the instructions from [Tutorial 1](mrlearning-base-ch1.md).</span></span> <span data-ttu-id="e4ef4-145">pour générer l’application mis à jour sur votre appareil.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-145">to build the updated application to your device.</span></span> <span data-ttu-id="e4ef4-146">Après avoir appuyé sur le bouton Créer une ancre de Azure, comme vous l’avez fait dans la leçon précédente, vous pouvez désormais partager l’ID d’ancrage de Azure à d’autres appareils en appuyant sur le bouton partager à un autre appareil.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-146">After pressing the Create Azure Anchor button, as you did in the previous lesson, you may now share the Azure Anchor ID to other devices by pressing the Share To Other Device button.</span></span>

   > <span data-ttu-id="e4ef4-147">Remarque: Sélectionnez le point d’ancrage du parent et faites défiler jusqu'à le script de point d’ancrage du parent.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-147">Note: Select the parent anchor and scroll down to the parent anchor script.</span></span> <span data-ttu-id="e4ef4-148">Assurez-vous que votre code confidentiel de partage public est unique, afin que lorsque vous le partagez, vous savez que vous partagez.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-148">Ensure that your public sharing pin is unique, so that when you share it, you know it is yours that you are sharing.</span></span> <span data-ttu-id="e4ef4-149">Il existe peut-être des milliers d’utilisateurs partage de point d’ancrage de Azure, donc cela vous permettra d’afin de que vous partagez les ancres Azure corrects.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-149">There could be thousands of users sharing their Azure anchors, so doing this will allow you to ensure you are sharing the correct Azure anchors.</span></span>

4. <span data-ttu-id="e4ef4-150">Si vous avez un autre appareil HoloLens 2, démarrez l’application, puis démarrez la Session Azure.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-150">If you have another HoloLens 2 device, start the application and then start the Azure Session.</span></span> <span data-ttu-id="e4ef4-151">Appuyez sur le bouton obtenir l’ID d’ancrage partagé, puis appuyez sur le bouton Rechercher une ancre de Azure pour localiser le point d’ancrage associé au code que nous avons enregistré sur le disque.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-151">Press the Get Shared Anchor ID button, and then press the Locate Azure Anchor button to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="e4ef4-152">La scène entière doit maintenant s’aligner dans sa position, à l’emplacement où il a été placé sur un autre appareil de HoloLens 2 !</span><span class="sxs-lookup"><span data-stu-id="e4ef4-152">The entire scene should now snap into position, at the where it was placed on the other HoloLens 2 device!</span></span> <span data-ttu-id="e4ef4-153">Si vous avez uniquement un HoloLens 2, vous pourrez toujours tester des fonctionnalités en redémarrant l’application, à partir de la Session d’Azure, puis appuyez sur le bouton « Obtenir l’ID d’ancrage partagé », puis appuyez sur le bouton Rechercher une ancre de Azure pour localiser le point d’ancrage associé le ID que nous avons enregistrée sur le disque.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-153">If you only have one HoloLens 2, you may still test functionality by restarting the application, starting the Azure Session, and then Press the "Get Shared Anchor ID" button button, and then press the Locate Azure Anchor button to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="e4ef4-154">La scène entière doit maintenant s’aligner dans sa position, à l’emplacement vous avez enregistré le point d’ancrage précédemment !</span><span class="sxs-lookup"><span data-stu-id="e4ef4-154">The entire scene should now snap into position, at the location you saved the anchor previously!</span></span>

## <a name="congratulations"></a><span data-ttu-id="e4ef4-155">Félicitations</span><span class="sxs-lookup"><span data-stu-id="e4ef4-155">Congratulations</span></span>
<span data-ttu-id="e4ef4-156">Dans cette leçon, vous avez appris comment conserver les ancres Spatial Azure entre les sessions d’application et le redémarrage de l’application en enregistrant l’ID d’ancrage spatiale de Azure sur le disque local sur HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-156">In this Lesson you learned how to persist Azure Spatial Anchors between application sessions and application restarts by saving the Azure Spatial Anchor ID to the local disk on HoloLens 2.</span></span> <span data-ttu-id="e4ef4-157">Vous avez également appris comment partager des ancres Spatial Azure entre plusieurs appareils pour une expérience de base hologramme multi-utilisateur, statiques partagée.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-157">You also learned how to share Azure Spatial Anchors between multiple devices for a basic multi-user, static hologram shared experience.</span></span>

<span data-ttu-id="e4ef4-158">Nous Apprenez à implémenter des ancres Spatial Azure en tant que partie d’une expérience partagée locale entièrement interactive au cours de la dernière leçon du Module de partage.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-158">We learn how to implement Azure Spatial Anchors as part of a fully interactive local shared experience during the final lesson of the Sharing Module.</span></span> <span data-ttu-id="e4ef4-159">Une expérience de partage locale peut inclure des fonctionnalités telles que des identificateurs de position, de rotation et de mise à l’échelle, un objet 3D synchronisé pour chaque utilisateur et partagés des États de l’application.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-159">A local sharing experience may include functionality such as synchronized 3D object position, rotation, and scale, identifiers for each user, and shared application states.</span></span> <span data-ttu-id="e4ef4-160">Ancres Spatial Azure améliore ces scénarios partagés en fournissant de chaque participant avec un point d’ancrage commun qui permet à tous les utilisateurs de voir des objets virtuels dans le même emplacement physique.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-160">Azure Spatial Anchors enhances these shared scenarios by providing each participant with a common anchor that lets all users see virtual objects in the same physical location.</span></span> <span data-ttu-id="e4ef4-161">Cela est vrai pour un éventail de plateformes d’appareils, y compris les appareils HoloLens, Android et iOS.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-161">This is true across a range of device platforms, including HoloLens, Android, and iOS devices.</span></span> <span data-ttu-id="e4ef4-162">Pour savoir comment développer une expérience partagée, exécutez toutes les leçons dans le module de partage.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-162">To learn how to develop a shared experience, complete all lessons in the Sharing module.</span></span>

<span data-ttu-id="e4ef4-163">Dans la leçon suivante, nous allez apprendre à fournir aux utilisateurs avec des commentaires en temps réel.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-163">In the next Lesson, we will learn how to provide users with real-time feedback.</span></span> <span data-ttu-id="e4ef4-164">Ces commentaires incluent des informations sur la création d’ancrage, de la qualité de compréhension de l’environnement et de l’état de la session Azure.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-164">This feedback will include information about Anchor creation, the quality of environment understanding, and the state of the Azure session.</span></span> <span data-ttu-id="e4ef4-165">Sans commentaires, les utilisateurs ne sait pas si un point d’ancrage a été correctement charger vers Azure, si la qualité de l’environnement est suffisante pour la création de point d’ancrage, ou l’état actuel.</span><span class="sxs-lookup"><span data-stu-id="e4ef4-165">Without feedback, users may not know whether an anchor has successfully been upload to Azure, whether the quality of the environment is sufficient for anchor creation, or the current state.</span></span>

[<span data-ttu-id="e4ef4-166">Leçon suivante : Didacticiel ASA 3</span><span class="sxs-lookup"><span data-stu-id="e4ef4-166">Next Lesson: ASA Tutorial 3</span></span>](mrlearning-asa-ch3.md)

