---
title: Mappage spatial
description: Mappage spatial fournit une représentation détaillée des surfaces réels dans l’environnement autour de la HoloLens.
author: mattzmsft
ms.author: mazeller
ms.date: 03/21/2018
ms.topic: article
keywords: mappage spatial, HoloLens, réalité mixte, reconstruction de l’aire de conception, maillage, sr
ms.openlocfilehash: 31abeca624512f1d5e721dbe879ca2243cf41345
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/12/2019
ms.locfileid: "59597101"
---
# <a name="spatial-mapping"></a><span data-ttu-id="c9a65-104">Mappage spatial</span><span class="sxs-lookup"><span data-stu-id="c9a65-104">Spatial mapping</span></span>

<span data-ttu-id="c9a65-105">Mappage spatial fournit une représentation détaillée des surfaces du monde réel dans l’environnement autour de la HoloLens, ce qui permet aux développeurs de créer une expérience de réalité mixte convaincante.</span><span class="sxs-lookup"><span data-stu-id="c9a65-105">Spatial mapping provides a detailed representation of real-world surfaces in the environment around the HoloLens, allowing developers to create a convincing mixed reality experience.</span></span> <span data-ttu-id="c9a65-106">En fusionnant le monde réel avec le monde virtuel, une application peut faire hologrammes semblent réel.</span><span class="sxs-lookup"><span data-stu-id="c9a65-106">By merging the real world with the virtual world, an application can make holograms seem real.</span></span> <span data-ttu-id="c9a65-107">Applications peuvent également plus naturellement aligner avec les attentes des utilisateurs en fournissant des interactions et des comportements réalistes familiers.</span><span class="sxs-lookup"><span data-stu-id="c9a65-107">Applications can also more naturally align with user expectations by providing familiar real-world behaviors and interactions.</span></span>

<br>

>[!VIDEO https://www.youtube.com/embed/zff2aQ1RaVo]

## <a name="device-support"></a><span data-ttu-id="c9a65-108">Prise en charge des appareils</span><span class="sxs-lookup"><span data-stu-id="c9a65-108">Device support</span></span>

<table>
<tr>
<th><span data-ttu-id="c9a65-109">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="c9a65-109">Feature</span></span></th><th style="width:150px"> <span data-ttu-id="c9a65-110"><a href="hololens-hardware-details.md">HoloLens (1er gen)</a></span><span class="sxs-lookup"><span data-stu-id="c9a65-110"><a href="hololens-hardware-details.md">HoloLens (1st gen)</a></span></span></th><th style="width:150px"><span data-ttu-id="c9a65-111">HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="c9a65-111">HoloLens 2</span></span></th><th style="width:150px"> <span data-ttu-id="c9a65-112"><a href="immersive-headset-hardware-details.md">Casques IMMERSIFS</a></span><span class="sxs-lookup"><span data-stu-id="c9a65-112"><a href="immersive-headset-hardware-details.md">Immersive headsets</a></span></span></th>
</tr><tr>
<td> <span data-ttu-id="c9a65-113">Mappage spatial</span><span class="sxs-lookup"><span data-stu-id="c9a65-113">Spatial mapping</span></span></td><td style="text-align: center;"> <span data-ttu-id="c9a65-114">✔️</span><span class="sxs-lookup"><span data-stu-id="c9a65-114">✔️</span></span></td><td style="text-align: center;"> <span data-ttu-id="c9a65-115">✔️</span><span class="sxs-lookup"><span data-stu-id="c9a65-115">✔️</span></span></td><td style="text-align: center;"></td>
</tr>
</table>



## <a name="conceptual-overview"></a><span data-ttu-id="c9a65-116">Vue d’ensemble conceptuelle</span><span class="sxs-lookup"><span data-stu-id="c9a65-116">Conceptual overview</span></span>

<span data-ttu-id="c9a65-117">![Les surfaces qui couvrent une salle de maillage](images/SurfaceReconstruction.jpg)</span><span class="sxs-lookup"><span data-stu-id="c9a65-117">![Mesh surfaces covering a room](images/SurfaceReconstruction.jpg)</span></span><br>
<span data-ttu-id="c9a65-118">*Un exemple d’une maille de mappage spatial couvrant une salle*</span><span class="sxs-lookup"><span data-stu-id="c9a65-118">*An example of a spatial mapping mesh covering a room*</span></span>

<span data-ttu-id="c9a65-119">Les deux types d’objet principal utilisés pour le mappage spatial sont l’Observateur Spatial' aire et la « Surface spatiale ».</span><span class="sxs-lookup"><span data-stu-id="c9a65-119">The two primary object types used for spatial mapping are the 'Spatial Surface Observer' and the 'Spatial Surface'.</span></span>

<span data-ttu-id="c9a65-120">L’application fournit l’Observateur de Surface spatiale avec un ou plusieurs volumes englobants, pour définir les régions d’espace dans lequel l’application souhaite recevoir des données de mappage spatial.</span><span class="sxs-lookup"><span data-stu-id="c9a65-120">The application provides the Spatial Surface Observer with one or more bounding volumes, to define the regions of space in which the application wishes to receive spatial mapping data.</span></span> <span data-ttu-id="c9a65-121">Pour chacun de ces volumes, mappage spatial fournira à l’application avec un ensemble de Surfaces spatiale.</span><span class="sxs-lookup"><span data-stu-id="c9a65-121">For each of these volumes, spatial mapping will provide the application with a set of Spatial Surfaces.</span></span>

<span data-ttu-id="c9a65-122">Ces volumes peuvent être STATIONNAIRES (dans un emplacement fixe en ce qui concerne le monde réel), ou elles peuvent être attachées à la HoloLens (ils déplacent, mais ne tournent pas, avec la HoloLens lorsqu’elles circulent dans l’environnement).</span><span class="sxs-lookup"><span data-stu-id="c9a65-122">These volumes may be stationary (in a fixed location with respect to the real world) or they may be attached to the HoloLens (they move, but do not rotate, with the HoloLens as it moves through the environment).</span></span> <span data-ttu-id="c9a65-123">Chaque surface spatiale décrit surfaces réels dans un petit volume d’espace, représenté sous la forme d’un maillage de triangles attaché à un monde-verrouillé [système de coordonnées spatial](coordinate-systems.md).</span><span class="sxs-lookup"><span data-stu-id="c9a65-123">Each spatial surface describes real-world surfaces in a small volume of space, represented as a triangle mesh attached to a world-locked [spatial coordinate system](coordinate-systems.md).</span></span>

<span data-ttu-id="c9a65-124">Comme le HoloLens rassemble des nouvelles données sur l’environnement, et lorsque des modifications à l’environnement sont, les surfaces spatiales apparaîtra, disparaissent et le modifier.</span><span class="sxs-lookup"><span data-stu-id="c9a65-124">As the HoloLens gathers new data about the environment, and as changes to the environment occur, spatial surfaces will appear, disappear and change.</span></span>

## <a name="common-usage-scenarios"></a><span data-ttu-id="c9a65-125">Scénarios d’utilisation courants</span><span class="sxs-lookup"><span data-stu-id="c9a65-125">Common usage scenarios</span></span>

![Illustrations de scénarios d’utilisation courants de mappage Spatial : Positionnement, Occlusion, physique et la Navigation](images/sm-concepts-1000px.png)

### <a name="placement"></a><span data-ttu-id="c9a65-127">Sélection élective</span><span class="sxs-lookup"><span data-stu-id="c9a65-127">Placement</span></span>

<span data-ttu-id="c9a65-128">Mappage spatial fournit aux applications la possibilité de présenter des formes naturelles et familière d’interaction à l’utilisateur ; ce qui pourrait être plus naturel que celle de placer votre téléphone vers le bas sur le support ?</span><span class="sxs-lookup"><span data-stu-id="c9a65-128">Spatial mapping provides applications with the opportunity to present natural and familiar forms of interaction to the user; what could be more natural than placing your phone down on the desk?</span></span>

<span data-ttu-id="c9a65-129">Limiter le placement de hologrammes (ou plus généralement, une sélection des emplacements spatiaux) de reposer sur des surfaces fournit un mappage naturel à partir de 3D (point dans l’espace) en 2D (point sur la surface).</span><span class="sxs-lookup"><span data-stu-id="c9a65-129">Constraining the placement of holograms (or more generally, any selection of spatial locations) to lie on surfaces provides a natural mapping from 3D (point in space) to 2D (point on surface).</span></span> <span data-ttu-id="c9a65-130">Cela réduit la quantité d’informations de l’utilisateur doit fournir à l’application et permet ainsi des interactions de l’utilisateur plus rapide, plus facile et plus précis.</span><span class="sxs-lookup"><span data-stu-id="c9a65-130">This reduces the amount of information the user needs to provide to the application and thus makes the user's interactions faster, easier and more precise.</span></span> <span data-ttu-id="c9a65-131">Cela est particulièrement vrai, car « distance » n’est pas quelque chose que nous avons l’habitude de communication physiquement à d’autres personnes ou aux ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="c9a65-131">This is particularly true because 'distance away' is not something that we are used to physically communicating to other people or to computers.</span></span> <span data-ttu-id="c9a65-132">Lorsque nous indiquons avec notre doigt, nous spécifions une direction, mais pas une distance.</span><span class="sxs-lookup"><span data-stu-id="c9a65-132">When we point with our finger, we are specifying a direction but not a distance.</span></span>

<span data-ttu-id="c9a65-133">Un inconvénient important ici est que lorsqu’une application déduit la distance à partir de la direction (par exemple en effectuant un raycast le long de la direction du regard de l’utilisateur pour rechercher le plus proche surface spatiale), il doit produire des résultats dont l’utilisateur est en mesure de manière fiable.</span><span class="sxs-lookup"><span data-stu-id="c9a65-133">An important caveat here is that when an application infers distance from direction (for example by performing a raycast along the user's gaze direction to find the nearest spatial surface), this must yield results that the user is able to reliably predict.</span></span> <span data-ttu-id="c9a65-134">Sinon, l’utilisateur va perdre leur logique de contrôle, et cela peut rapidement devenir frustrante.</span><span class="sxs-lookup"><span data-stu-id="c9a65-134">Otherwise, the user will lose their sense of control and this can quickly become frustrating.</span></span> <span data-ttu-id="c9a65-135">Une méthode qui permet cela consiste à effectuer plusieurs raycasts au lieu d’un.</span><span class="sxs-lookup"><span data-stu-id="c9a65-135">One method that helps with this is to perform multiple raycasts instead of just one.</span></span> <span data-ttu-id="c9a65-136">Les résultats d’agrégation doivent être plus lisse et plus prévisible, moins susceptibles d’influencer dans les résultats temporaires « valeurs hors norme » (comme peut être dû à des rayons en passant par les failles minuscules ou en appuyant sur petits extraits de la géométrie de l’utilisateur ne connaît pas).</span><span class="sxs-lookup"><span data-stu-id="c9a65-136">The aggregate results should be smoother and more predictable, less susceptible to influence from transient 'outlier' results (as can be caused by rays passing through tiny holes or hitting small bits of geometry that the user is not aware of).</span></span> <span data-ttu-id="c9a65-137">Agrégation ou lissage peut également être effectué au fil du temps ; par exemple, vous pouvez limiter la vitesse maximale à laquelle un hologramme peut varier dans la distance à partir de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c9a65-137">Aggregation or smoothing can also be performed over time; for example you can limit the maximum speed at which a hologram can vary in distance from the user.</span></span> <span data-ttu-id="c9a65-138">Limitation simplement la valeur de distance minimale et maximale peut également aider, donc l’hologramme en cours de déplacement ne pas soudainement voler absent dans la distance ou un plantage en face de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c9a65-138">Simply limiting the minimum and maximum distance value can also help, so the hologram being moved does not suddenly fly away into the distance or come crashing back into the user's face.</span></span>

<span data-ttu-id="c9a65-139">Applications permet également la forme et la direction des surfaces guide hologramme placement.</span><span class="sxs-lookup"><span data-stu-id="c9a65-139">Applications can also use the shape and direction of surfaces to guide hologram placement.</span></span> <span data-ttu-id="c9a65-140">Une chaise HOLOGRAPHIQUE ne doit pas pénétrer à travers les murs et doit se trouvent vidage avec la valeur plancher même si elle est légèrement inégale.</span><span class="sxs-lookup"><span data-stu-id="c9a65-140">A holographic chair should not penetrate through walls and should sit flush with the floor even if it is slightly uneven.</span></span> <span data-ttu-id="c9a65-141">Ce type de fonctionnalité serait probablement reposent sur l’utilisation de collisions de physique plutôt que simplement raycasts, autres soucis similaires cependant seront applique.</span><span class="sxs-lookup"><span data-stu-id="c9a65-141">This kind of functionality would likely rely upon the use of physics collisions rather than just raycasts, however similar concerns will apply.</span></span> <span data-ttu-id="c9a65-142">Si l’hologramme placée a plusieurs polygones petits qui se borner out, comme les jambes sur une chaise, il peut être judicieux d’étendre la représentation physique de ces polygones à quelque chose de plus larges et plus lisse afin qu’ils soient plus en mesure de faire disparaître sur des surfaces spatiales sans avec SnagIt.</span><span class="sxs-lookup"><span data-stu-id="c9a65-142">If the hologram being placed has many small polygons that stick out, like the legs on a chair, it may make sense to expand the physics representation of those polygons to something wider and smoother so that they are more able to slide over spatial surfaces without snagging.</span></span>

<span data-ttu-id="c9a65-143">À son extrême, l’entrée d’utilisateur peut être simplifiée suite entièrement et surfaces spatiales peuvent être utilisées pour effectuer la sélection élective hologramme entièrement automatique.</span><span class="sxs-lookup"><span data-stu-id="c9a65-143">At its extreme, user input can be simplified away entirely and spatial surfaces can be used to perform entirely automatic hologram placement.</span></span> <span data-ttu-id="c9a65-144">Par exemple, l’application peut placer un commutateur de lumière holographique de quelque part sur le mur de l’utilisateur appuie sur.</span><span class="sxs-lookup"><span data-stu-id="c9a65-144">For example, the application could place a holographic light-switch somewhere on the wall for the user to press.</span></span> <span data-ttu-id="c9a65-145">La même restriction sur la prévisibilité applique doublement ici ; Si l’utilisateur s’attend à contrôler hologramme placement, mais l’application ne place pas de toujours hologrammes où qu’elles attendent (si le commutateur de lumière apparaît dans un endroit que l’utilisateur ne peut pas atteindre), ce sera une expérience frustrante.</span><span class="sxs-lookup"><span data-stu-id="c9a65-145">The same caveat about predictability applies doubly here; if the user expects control over hologram placement, but the application does not always place holograms where they expect (if the light-switch appears somewhere that the user cannot reach), then this will be a frustrating experience.</span></span> <span data-ttu-id="c9a65-146">Il peut en fait être pire effectuer la sélection élective automatique nécessitant une correction de l’utilisateur du temps, aux simplement oblige l’utilisateur à procèdent toujours à une sélection élective elles-mêmes. Étant donné que la sélection élective automatique réussie est *attendu*, correction manuelle semble un fardeau !</span><span class="sxs-lookup"><span data-stu-id="c9a65-146">It can actually be worse to perform automatic placement that requires user correction some of the time, than to just require the user to always perform placement themselves; because successful automatic placement is *expected*, manual correction feels like a burden!</span></span>

<span data-ttu-id="c9a65-147">Notez également que la capacité d’une application pour utiliser des surfaces spatiales pour sélection élective dépend fortement de l’application [analyse expérience](spatial-mapping-design.md#the-environment-scanning-experience).</span><span class="sxs-lookup"><span data-stu-id="c9a65-147">Note also that the ability of an application to use spatial surfaces for placement depends heavily on the application's [scanning experience](spatial-mapping-design.md#the-environment-scanning-experience).</span></span> <span data-ttu-id="c9a65-148">Si une surface n’a pas été analysée, il ne peut pas être utilisé pour la sélection élective.</span><span class="sxs-lookup"><span data-stu-id="c9a65-148">If a surface has not been scanned, then it cannot be used for placement.</span></span> <span data-ttu-id="c9a65-149">C’est à l’application pour être plus clair à l’utilisateur, afin qu’ils peuvent contribuer à analyser des nouvelles surfaces ou sélectionnez un nouvel emplacement.</span><span class="sxs-lookup"><span data-stu-id="c9a65-149">It is up to the application to make this clear to the user, so that they can either help scan new surfaces or select a new location.</span></span>

<span data-ttu-id="c9a65-150">Des commentaires visuels à l’utilisateur sont d’une importance primordiale pendant la sélection élective.</span><span class="sxs-lookup"><span data-stu-id="c9a65-150">Visual feedback to the user is of paramount importance during placement.</span></span> <span data-ttu-id="c9a65-151">L’utilisateur a besoin de savoir où l’hologramme est par rapport à la surface le plus proche avec [mise à la terre des effets](spatial-mapping.md#visualization).</span><span class="sxs-lookup"><span data-stu-id="c9a65-151">The user needs to know where the hologram is in relation to the nearest surface with [grounding effects](spatial-mapping.md#visualization).</span></span> <span data-ttu-id="c9a65-152">Ils doivent comprendre pourquoi le déplacement de leur hologramme est actuellement limité (par exemple, en raison d’un conflit avec un autre à proximité de la surface).</span><span class="sxs-lookup"><span data-stu-id="c9a65-152">They should understand why the movement of their hologram is being constrained (for example, due to collision with another nearby surface).</span></span> <span data-ttu-id="c9a65-153">Si elles ne peuvent pas placer un hologramme dans l’emplacement actuel, puis retour visuel doit indiquer clairement pourquoi ne pas.</span><span class="sxs-lookup"><span data-stu-id="c9a65-153">If they cannot place a hologram in the current location, then visual feedback should make it clear why not.</span></span> <span data-ttu-id="c9a65-154">Par exemple, si l’utilisateur tente de placer un canapé HOLOGRAPHIQUE bloqué moitié sur la prise murale, puis les parties du canapé qui sont trouvent derrière le mur doivent pulsate dans une couleur en colère.</span><span class="sxs-lookup"><span data-stu-id="c9a65-154">For example, if the user is trying to place a holographic couch stuck half-way into the wall, then the portions of the couch that are behind the wall should pulsate in an angry color.</span></span> <span data-ttu-id="c9a65-155">Ou, à l’inverse, si l’application ne peut pas trouver une surface spatiale dans un emplacement où l’utilisateur peut voir une surface du monde réel, puis l’application doit indiquer cela clairement.</span><span class="sxs-lookup"><span data-stu-id="c9a65-155">Or conversely, if the application cannot find a spatial surface in a location where the user can see a real-world surface, then the application should make this clear.</span></span> <span data-ttu-id="c9a65-156">L’absence d’évident d’un effet de la masse dans cette zone peut atteindre ce but.</span><span class="sxs-lookup"><span data-stu-id="c9a65-156">The obvious absence of a grounding effect in this area may achieve this purpose.</span></span>

### <a name="occlusion"></a><span data-ttu-id="c9a65-157">Occlusion</span><span class="sxs-lookup"><span data-stu-id="c9a65-157">Occlusion</span></span>

<span data-ttu-id="c9a65-158">Une des principales utilisations des surfaces de mappage spatial doit simplement occlude hologrammes.</span><span class="sxs-lookup"><span data-stu-id="c9a65-158">One of the primary uses of spatial mapping surfaces is simply to occlude holograms.</span></span> <span data-ttu-id="c9a65-159">Ce comportement simple a un impact important sur le réalisme perçu de hologrammes, vous aider à créer une idée viscérale qui vraiment occupent le même espace physique que l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c9a65-159">This simple behavior has a huge impact on the perceived realism of holograms, helping to create a visceral sense that really inhabit the same physical space as the user.</span></span>

<span data-ttu-id="c9a65-160">OCCLUSION fournit également des informations à l’utilisateur. Quand un hologramme semble être bloqués par une surface du monde réel, il offre des indications visuelles supplémentaires quant à l’emplacement spatial de ce hologramme dans le monde.</span><span class="sxs-lookup"><span data-stu-id="c9a65-160">Occlusion also provides information to the user; when a hologram appears to be occluded by a real-world surface, this provides additional visual feedback as to the spatial location of that hologram in the world.</span></span> <span data-ttu-id="c9a65-161">À l’inverse, occlusion peut également utilement *masquer* plus d’informations à partir de l’utilisateur ; hologrammes OCCLUSION derrière les murs peut réduire l’encombrement visuel d’une manière intuitive.</span><span class="sxs-lookup"><span data-stu-id="c9a65-161">Conversely, occlusion can also usefully *hide* information from the user; occluding holograms behind walls can reduce visual clutter in an intuitive way.</span></span> <span data-ttu-id="c9a65-162">Pour masquer ou afficher un hologramme, l’utilisateur doit simplement déplacer leur tête.</span><span class="sxs-lookup"><span data-stu-id="c9a65-162">To hide or reveal a hologram, the user merely has to move their head.</span></span>

<span data-ttu-id="c9a65-163">OCCLUSION peut également servir d’amorcer des attentes en relation avec une interface utilisateur naturelle en fonction des interactions physiques familiers ; Si un hologramme est bloqué par une surface, c’est parce que cette surface est solide, par conséquent, l’utilisateur doit attendre que l’hologramme sera *entrent en collision* avec celui de surface et pas simplement passer au travers.</span><span class="sxs-lookup"><span data-stu-id="c9a65-163">Occlusion can also be used to prime expectations for a natural user interface based upon familiar physical interactions; if a hologram is occluded by a surface it is because that surface is solid, so the user should expect that the hologram will *collide* with that surface and not simply pass through it.</span></span>

<span data-ttu-id="c9a65-164">Parfois, occlusion d’hologrammes n’est pas souhaitable.</span><span class="sxs-lookup"><span data-stu-id="c9a65-164">Sometimes, occlusion of holograms is undesirable.</span></span> <span data-ttu-id="c9a65-165">Si un utilisateur doit être en mesure d’interagir avec un hologramme, ils doivent être en mesure de voir, même s’il se trouve derrière une surface du monde réel.</span><span class="sxs-lookup"><span data-stu-id="c9a65-165">If a user needs to be able to interact with a hologram, then they need to be able to see it - even if it is behind a real-world surface.</span></span> <span data-ttu-id="c9a65-166">Dans ce cas, il est généralement judicieux rendu tel un hologramme différemment lorsqu’il est bloqué (par exemple, en réduisant sa luminosité).</span><span class="sxs-lookup"><span data-stu-id="c9a65-166">In such cases, it usually makes sense to render such a hologram differently when it is occluded (for example, by reducing its brightness).</span></span> <span data-ttu-id="c9a65-167">De cette façon, l’utilisateur sera en mesure de localiser visuellement l’hologramme, mais ils seront toujours conscients qu’il se trouve derrière de quelque chose.</span><span class="sxs-lookup"><span data-stu-id="c9a65-167">This way, the user will be able to visually locate the hologram, but they will still be aware that it is behind something.</span></span>

### <a name="physics"></a><span data-ttu-id="c9a65-168">Physique</span><span class="sxs-lookup"><span data-stu-id="c9a65-168">Physics</span></span>

<span data-ttu-id="c9a65-169">L’utilisation de simulation physique est une autre manière que le mappage spatial peut être utilisé pour renforcer la *présence* de hologrammes dans un espace physique de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c9a65-169">The use of physics simulation is another way in which spatial mapping can be used to reinforce the *presence* of holograms in the user's physical space.</span></span> <span data-ttu-id="c9a65-170">Lorsque mon balle en caoutchouc HOLOGRAPHIQUE désactiver mon bureau se déroule dans la pratique, rebondit sur le sol et disparaît sous le canapé, il peut être difficile pour moi de croire qu’il n’est pas vraiment ce.</span><span class="sxs-lookup"><span data-stu-id="c9a65-170">When my holographic rubber ball rolls realistically off my desk, bounces across the floor and disappears under the couch, it might be hard for me to believe that it's not really there.</span></span>

<span data-ttu-id="c9a65-171">Simulation physique offre également la possibilité pour une application d’utiliser des interactions de physique naturelles et familière.</span><span class="sxs-lookup"><span data-stu-id="c9a65-171">Physics simulation also provides the opportunity for an application to use natural and familiar physics-based interactions.</span></span> <span data-ttu-id="c9a65-172">Déplacement de HOLOGRAPHIQUE meuble autour de l’étage seront probablement plus facile pour l’utilisateur si mobilier réagit comme si elle ont été décalée sur le sol avec l’inertie appropriée et des frictions.</span><span class="sxs-lookup"><span data-stu-id="c9a65-172">Moving a piece of holographic furniture around on the floor will likely be easier for the user if the furniture responds as if it were sliding across the floor with the appropriate inertia and friction.</span></span>

<span data-ttu-id="c9a65-173">Pour générer des comportements physiques réalistes, vous aurez probablement besoin d’effectuer certaines [mesh traitement](spatial-mapping.md#mesh-processing) telles que de combler les lacunes, suppression flottante délirante et lissage approximatif des surfaces.</span><span class="sxs-lookup"><span data-stu-id="c9a65-173">In order to generate realistic physical behaviors, you will likely need to perform some [mesh processing](spatial-mapping.md#mesh-processing) such as filling holes, removing floating hallucinations and smoothing rough surfaces.</span></span>

<span data-ttu-id="c9a65-174">Vous devez également prendre en compte comment votre application [analyse expérience](spatial-mapping-design.md#the-environment-scanning-experience) influence son simulation physique.</span><span class="sxs-lookup"><span data-stu-id="c9a65-174">You will also need to consider how your application's [scanning experience](spatial-mapping-design.md#the-environment-scanning-experience) influences its physics simulation.</span></span> <span data-ttu-id="c9a65-175">Tout d’abord, manquant surfaces n’entre en conflit avec n’importe quoi : que se passe-t-il lorsque la balle en caoutchouc génère le couloir et la fin du monde connu ?</span><span class="sxs-lookup"><span data-stu-id="c9a65-175">Firstly, missing surfaces won't collide with anything; what happens when the rubber ball rolls off down the corridor and off the end of the known world?</span></span> <span data-ttu-id="c9a65-176">Deuxièmement, vous devez décider si vous continuez à répondre aux modifications de l’environnement au fil du temps.</span><span class="sxs-lookup"><span data-stu-id="c9a65-176">Secondly, you need to decide whether you will continue to respond to changes in the environment over time.</span></span> <span data-ttu-id="c9a65-177">Dans certains cas, vous souhaitez répondre aussi rapidement que possible ; par exemple si l’utilisateur est à l’aide de portes et meubles comme barricades déplaçable dans défense contre un tempest de flèches Roman entrants.</span><span class="sxs-lookup"><span data-stu-id="c9a65-177">In some cases, you will want to respond as quickly as possible; say if the user is using doors and furniture as movable barricades in defense against a tempest of incoming Roman arrows.</span></span> <span data-ttu-id="c9a65-178">Dans d’autres cas cependant, vous souhaiterez ignorer les nouvelles mises à jour ; pilotent votre voiture de sport HOLOGRAPHIQUE autour de l’ovale sur votre plancher soudainement ne peut-être donc amusant si votre chien décide de se trouvent au milieu de la piste.</span><span class="sxs-lookup"><span data-stu-id="c9a65-178">In other cases though, you may want to ignore new updates; driving your holographic sports car around the racetrack on your floor may suddenly not be so fun if your dog decides to sit in the middle of the track.</span></span>

### <a name="navigation"></a><span data-ttu-id="c9a65-179">Navigation</span><span class="sxs-lookup"><span data-stu-id="c9a65-179">Navigation</span></span>

<span data-ttu-id="c9a65-180">Applications peuvent utiliser les données de mappage spatial pour accorder HOLOGRAPHIQUE caractères (ou les agents) permet de naviguer le monde réel dans la même façon une personne réelle.</span><span class="sxs-lookup"><span data-stu-id="c9a65-180">Applications can use spatial mapping data to grant holographic characters (or agents) the ability to navigate the real world in the same way a real person would.</span></span> <span data-ttu-id="c9a65-181">Cela peut aider à renforcer la présence de caractères HOLOGRAPHIQUE en les limitant au même jeu de comportements de naturels et familiers que celles de l’utilisateur et de ses amis.</span><span class="sxs-lookup"><span data-stu-id="c9a65-181">This can help reinforce the presence of holographic characters by restricting them to the same set of natural, familiar behaviors as those of the user and their friends.</span></span>

<span data-ttu-id="c9a65-182">Fonctionnalités de navigation peut être utiles aux utilisateurs également.</span><span class="sxs-lookup"><span data-stu-id="c9a65-182">Navigation capabilities could be useful to users as well.</span></span> <span data-ttu-id="c9a65-183">Une fois qu’une carte de navigation a été créée dans une zone donnée, il peut être partagé pour fournir des directions HOLOGRAPHIQUE pour les nouveaux utilisateurs êtes pas familiarisés avec cet emplacement.</span><span class="sxs-lookup"><span data-stu-id="c9a65-183">Once a navigation map has been built in a given area, it could be shared to provide holographic directions for new users unfamiliar with that location.</span></span> <span data-ttu-id="c9a65-184">Cette carte peut être conçue pour aider à maintenir le passage » « échange de données, ou pour éviter des accidents dans des emplacements dangereux tels que les sites de construction.</span><span class="sxs-lookup"><span data-stu-id="c9a65-184">This map could be designed to help keep pedestrian 'traffic' flowing smoothly, or to avoid accidents in dangerous locations like construction sites.</span></span>

<span data-ttu-id="c9a65-185">Principaux défis techniques liés à l’implémentation des fonctionnalités de navigation sera la détection fiable des surfaces opérationnel (l’homme allure tables !) et sans perte de données adaptation aux modifications de l’environnement (l’homme ne guide les portes fermés !).</span><span class="sxs-lookup"><span data-stu-id="c9a65-185">The key technical challenges involved in implementing navigation functionality will be reliable detection of walkable surfaces (humans don't walk on tables!) and graceful adaptation to changes in the environment (humans don't walk through closed doors!).</span></span> <span data-ttu-id="c9a65-186">La maille peut nécessiter certaines [traitement](spatial-mapping.md#mesh-processing) avant qu’il soit utilisable pour la planification de chemin d’accès et la navigation par un caractère virtuel.</span><span class="sxs-lookup"><span data-stu-id="c9a65-186">The mesh may require some [processing](spatial-mapping.md#mesh-processing) before it is usable for path-planning and navigation by a virtual character.</span></span> <span data-ttu-id="c9a65-187">Lissage du maillage et de suppression délirante peuvent aider à éviter les caractères devient bloqués.</span><span class="sxs-lookup"><span data-stu-id="c9a65-187">Smoothing the mesh and removing hallucinations may help avoid characters becoming stuck.</span></span> <span data-ttu-id="c9a65-188">Vous pouvez également simplifier considérablement la maille afin d’accélérer son chemin d’accès-planification et les calculs de navigation.</span><span class="sxs-lookup"><span data-stu-id="c9a65-188">You may also wish to drastically simplify the mesh in order to speed up your character's path-planning and navigation calculations.</span></span> <span data-ttu-id="c9a65-189">Ces défis ont reçu beaucoup d’attention dans le développement de la technologie de jeu vidéo, et constitue une mine de littérature de recherche disponibles sur ces sujets.</span><span class="sxs-lookup"><span data-stu-id="c9a65-189">These challenges have received a great deal of attention in the development of videogame technology, and there is a wealth of available research literature on these topics.</span></span>

<span data-ttu-id="c9a65-190">Notez que la fonctionnalité intégrée de NavMesh dans Unity ne peut pas être utilisée avec des surfaces de mappage spatial.</span><span class="sxs-lookup"><span data-stu-id="c9a65-190">Note that the built-in NavMesh functionality in Unity cannot be used with spatial mapping surfaces.</span></span> <span data-ttu-id="c9a65-191">Il s’agit, car les surfaces de mappage spatial ne sont pas connues avant l’application démarre, tandis que les fichiers de données NavMesh doivent être générés à partir de ressources source avance.</span><span class="sxs-lookup"><span data-stu-id="c9a65-191">This is because spatial mapping surfaces are not known until the application starts, whereas NavMesh data files need to be generated from source assets ahead of time.</span></span> <span data-ttu-id="c9a65-192">Notez également que, le système de mappage spatial ne fournira pas [plus d’informations sur les surfaces de très loin](spatial-mapping-design.md#the-environment-scanning-experience) à partir de l’emplacement actuel de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c9a65-192">Also note that, the spatial mapping system will not provide [information about surfaces very far away](spatial-mapping-design.md#the-environment-scanning-experience) from the user's current location.</span></span> <span data-ttu-id="c9a65-193">Par conséquent, l’application doit « n’oubliez pas' surfaces lui-même s’il doit générer une carte d’une zone de très grande taille.</span><span class="sxs-lookup"><span data-stu-id="c9a65-193">So the application must 'remember' surfaces itself if it is to build a map of a very large area.</span></span>

### <a name="visualization"></a><span data-ttu-id="c9a65-194">visualisation</span><span class="sxs-lookup"><span data-stu-id="c9a65-194">Visualization</span></span>

<span data-ttu-id="c9a65-195">La plupart du temps, il est approprié pour les surfaces spatiales soit invisible ; Pour réduire l’encombrement visuel et de laisser le réel world parler d’elles-mêmes.</span><span class="sxs-lookup"><span data-stu-id="c9a65-195">Most of the time it is appropriate for spatial surfaces to be invisible; to minimize visual clutter and let the real world speak for itself.</span></span> <span data-ttu-id="c9a65-196">Toutefois, il est parfois utile de visualiser les surfaces de mappage spatial directement, en dépit du fait que leurs équivalents du monde réel sont déjà visibles.</span><span class="sxs-lookup"><span data-stu-id="c9a65-196">However, sometimes it is useful to visualize spatial mapping surfaces directly, despite the fact that their real-world counterparts are already visible.</span></span>

<span data-ttu-id="c9a65-197">Par exemple, lorsque l’utilisateur tente de placer un hologramme sur une surface (en plaçant un fichier CAB HOLOGRAPHIQUE sur un mur, par exemple) il peut être utile de « d’arrière-plan » l’hologramme en effectuant un cast d’un cliché instantané sur la surface.</span><span class="sxs-lookup"><span data-stu-id="c9a65-197">For example, when the user is trying to place a hologram onto a surface (placing a holographic cabinet on the wall, say) it can be useful to 'ground' the hologram by casting a shadow onto the surface.</span></span> <span data-ttu-id="c9a65-198">Cela donne à l’utilisateur beaucoup plus claire de la proximité physique exacte entre la hologramme et la surface.</span><span class="sxs-lookup"><span data-stu-id="c9a65-198">This gives the user a much clearer sense of the exact physical proximity between the hologram and the surface.</span></span> <span data-ttu-id="c9a65-199">Il s’agit également un exemple de la plus pratique visuellement « aperçu » une modification avant que l’utilisateur valide lui.</span><span class="sxs-lookup"><span data-stu-id="c9a65-199">This is also an example of the more general practice of visually 'previewing' a change before the user commits to it.</span></span>

<span data-ttu-id="c9a65-200">En visualisant les surfaces, l’application peut partager avec l’utilisateur sa compréhension de l’environnement.</span><span class="sxs-lookup"><span data-stu-id="c9a65-200">By visualizing surfaces, the application can share with the user its understanding of the environment.</span></span> <span data-ttu-id="c9a65-201">Par exemple, un jeu de plateau HOLOGRAPHIQUE peut visualiser les surfaces horizontales qu’il a identifié comme « tables », pour que l’utilisateur sache où ils vont interagir.</span><span class="sxs-lookup"><span data-stu-id="c9a65-201">For example, a holographic board game could visualize the horizontal surfaces that it has identified as 'tables', so the user knows where they should go to interact.</span></span>

<span data-ttu-id="c9a65-202">Visualisation des surfaces peut être un moyen utile pour afficher l’utilisateur à proximité des espaces qui sont masquées.</span><span class="sxs-lookup"><span data-stu-id="c9a65-202">Visualizing surfaces can be a useful way to show the user nearby spaces that are hidden from view.</span></span> <span data-ttu-id="c9a65-203">Cela peut fournir un moyen simple de donner à l’utilisateur d’accéder à leur cuisine (et tous ses hologrammes de relation contenant-contenus) à partir de leur salon.</span><span class="sxs-lookup"><span data-stu-id="c9a65-203">This could provide a simple way to give the user access to their kitchen (and all of its contained holograms) from their living room.</span></span>

<span data-ttu-id="c9a65-204">Les panneaux d’aire de conception fournies par le mappage spatial ne peuvent pas être particulièrement « nettoyage ».</span><span class="sxs-lookup"><span data-stu-id="c9a65-204">The surface meshes provided by spatial mapping may not be particularly 'clean'.</span></span> <span data-ttu-id="c9a65-205">Par conséquent, il est important de les visualiser de façon appropriée.</span><span class="sxs-lookup"><span data-stu-id="c9a65-205">Thus it is important to visualize them appropriately.</span></span> <span data-ttu-id="c9a65-206">Calculs d’éclairage traditionnel peuvent Surligner les erreurs dans les normales de surface d’une manière visuellement gênant, tandis que les textures de « nettoyage » projetés sur la surface peuvent vous aider à lui donner une apparence plus propre.</span><span class="sxs-lookup"><span data-stu-id="c9a65-206">Traditional lighting calculations may highlight errors in surface normals in a visually distracting manner, whilst 'clean' textures projected onto the surface may help to give it a tidier appearance.</span></span> <span data-ttu-id="c9a65-207">Il est également possible d’effectuer [mesh traitement](spatial-mapping.md#mesh-processing) pour améliorer les propriétés de la maille, avant que les surfaces sont rendus.</span><span class="sxs-lookup"><span data-stu-id="c9a65-207">It is also possible to perform [mesh processing](spatial-mapping.md#mesh-processing) to improve mesh properties, before the surfaces are rendered.</span></span>

## <a name="using-the-surface-observer"></a><span data-ttu-id="c9a65-208">À l’aide de l’aire de conception observateur</span><span class="sxs-lookup"><span data-stu-id="c9a65-208">Using The Surface Observer</span></span>

<span data-ttu-id="c9a65-209">Le point de départ pour le mappage spatial est l’aire de conception observateur.</span><span class="sxs-lookup"><span data-stu-id="c9a65-209">The starting point for spatial mapping is the surface observer.</span></span> <span data-ttu-id="c9a65-210">Flux de programme est comme suit :</span><span class="sxs-lookup"><span data-stu-id="c9a65-210">Program flow is as follows:</span></span>
* <span data-ttu-id="c9a65-211">Créer un objet de l’aire de conception observateur</span><span class="sxs-lookup"><span data-stu-id="c9a65-211">Create a surface observer object</span></span>
   * <span data-ttu-id="c9a65-212">Fournir un ou plusieurs volumes spatiales, pour définir les régions d’intérêt dans lequel l’application souhaite recevoir des données de mappage spatial.</span><span class="sxs-lookup"><span data-stu-id="c9a65-212">Provide one or more spatial volumes, to define the regions of interest in which the application wishes to receive spatial mapping data.</span></span> <span data-ttu-id="c9a65-213">Un volume spatial est simplement une forme définissant une zone d’espace, par exemple une sphère ou une zone.</span><span class="sxs-lookup"><span data-stu-id="c9a65-213">A spatial volume is simply a shape defining a region of space, such as a sphere or a box.</span></span>
   * <span data-ttu-id="c9a65-214">Utiliser un volume spatial avec un système de coordonnées spatial world-verrouillé pour identifier une région fixe du monde physique.</span><span class="sxs-lookup"><span data-stu-id="c9a65-214">Use a spatial volume with a world-locked spatial coordinate system to identify a fixed region of the physical world.</span></span>
   * <span data-ttu-id="c9a65-215">Utilisez un volume spatial, mis à jour avec chaque image avec un verrouillage de corps spatial système de coordonnées, pour identifier une région d’espace qui déplace (mais ne pivote pas) avec l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c9a65-215">Use a spatial volume, updated each frame with a body-locked spatial coordinate system, to identify a region of space that moves (but does not rotate) with the user.</span></span>
   * <span data-ttu-id="c9a65-216">Ces volumes spatiales peuvent être modifiées ultérieurement à tout moment, en tant que l’état de l’application ou l’utilisateur change.</span><span class="sxs-lookup"><span data-stu-id="c9a65-216">These spatial volumes may be changed later at any time, as the status of the application or the user changes.</span></span>
* <span data-ttu-id="c9a65-217">Utiliser l’interrogation ou notification à récupérer des informations sur les surfaces spatiales</span><span class="sxs-lookup"><span data-stu-id="c9a65-217">Use polling or notification to retrieve information about spatial surfaces</span></span>
   * <span data-ttu-id="c9a65-218">Vous pouvez 'interroger' l’aire de conception observateur pour l’état de surface spatiale à tout moment.</span><span class="sxs-lookup"><span data-stu-id="c9a65-218">You may 'poll' the surface observer for spatial surface status at any time.</span></span> <span data-ttu-id="c9a65-219">Vous pouvez également vous pouvez enregistrer pour ' surfaces' événement modifié l’aire de conception observateur, notifie l’application lorsque les surfaces spatiales ont changé.</span><span class="sxs-lookup"><span data-stu-id="c9a65-219">Alternatively, you may register for the surface observer's 'surfaces changed' event, which will notify the application when spatial surfaces have changed.</span></span>
   * <span data-ttu-id="c9a65-220">Pour un volume dynamique spatiaux, tels que le frustum vue, ou un volume verrouillé de corps, les applications devront interroge les modifications de chaque trame en affectant à la région d’intérêt et obtention de l’ensemble actuel des surfaces spatiales.</span><span class="sxs-lookup"><span data-stu-id="c9a65-220">For a dynamic spatial volume, such as the view frustum, or a body-locked volume, applications will need to poll for changes each frame by setting the region of interest and then obtaining the current set of spatial surfaces.</span></span>
   * <span data-ttu-id="c9a65-221">Pour un volume statique, par exemple un cube verrouillé de monde couvrant une salle unique, les applications peuvent enregistrer pour l’événement « surfaces modifié » être averti lorsque des surfaces spatiales à l’intérieur de ce volume a peut-être changé.</span><span class="sxs-lookup"><span data-stu-id="c9a65-221">For a static volume, such as a world-locked cube covering a single room, applications may register for the 'surfaces changed' event to be notified when spatial surfaces inside that volume may have changed.</span></span>
* <span data-ttu-id="c9a65-222">Modifications des surfaces de processus</span><span class="sxs-lookup"><span data-stu-id="c9a65-222">Process surfaces changes</span></span>
   * <span data-ttu-id="c9a65-223">Itérer au sein de l’ensemble fourni des surfaces spatiales.</span><span class="sxs-lookup"><span data-stu-id="c9a65-223">Iterate the provided set of spatial surfaces.</span></span>
   * <span data-ttu-id="c9a65-224">Classer les surfaces spatiales comme ajouté, modifié ou supprimé.</span><span class="sxs-lookup"><span data-stu-id="c9a65-224">Classify spatial surfaces as added, changed or removed.</span></span>
   * <span data-ttu-id="c9a65-225">Pour chaque surface spatiale ajouté ou modifié, le cas échéant, soumettre une demande asynchrone pour recevoir des mises à jour de maillage représentant l’état actuel de l’aire au niveau de détail souhaité.</span><span class="sxs-lookup"><span data-stu-id="c9a65-225">For each added or changed spatial surface, if appropriate submit an asynchronous request to receive updated mesh representing the surface's current state at the desired level of detail.</span></span>
* <span data-ttu-id="c9a65-226">Traiter la demande asynchrone maille (plus de détails dans les sections suivantes).</span><span class="sxs-lookup"><span data-stu-id="c9a65-226">Process the asynchronous mesh request (more details in following sections).</span></span>

## <a name="mesh-caching"></a><span data-ttu-id="c9a65-227">La mise en cache de maillage</span><span class="sxs-lookup"><span data-stu-id="c9a65-227">Mesh Caching</span></span>

<span data-ttu-id="c9a65-228">Surfaces spatiales sont représentées par des maillages de triangle dense.</span><span class="sxs-lookup"><span data-stu-id="c9a65-228">Spatial surfaces are represented by dense triangle meshes.</span></span> <span data-ttu-id="c9a65-229">Stockage, de rendu et le traitement de ces panneaux peuvent consommer des ressources de calcul et de stockage importantes.</span><span class="sxs-lookup"><span data-stu-id="c9a65-229">Storing, rendering and processing these meshes can consume significant computational and storage resources.</span></span> <span data-ttu-id="c9a65-230">Par conséquent, chaque application doit adopter une maille de la mise en cache de schéma appropriée à ses besoins, afin de réduire les ressources utilisées pour le stockage et traitement de la maille.</span><span class="sxs-lookup"><span data-stu-id="c9a65-230">As such, each application should adopt a mesh caching scheme appropriate to its needs, in order to minimize the resources used for mesh processing and storage.</span></span> <span data-ttu-id="c9a65-231">Ce schéma doit déterminer des maillages à conserver et à ignorer, ainsi que quand mettre à jour de la maille de chaque surface spatiale.</span><span class="sxs-lookup"><span data-stu-id="c9a65-231">This scheme should determine which meshes to retain and which to discard, as well as when to update the mesh for each spatial surface.</span></span>

<span data-ttu-id="c9a65-232">La plupart des considérations abordées ici informe directement comment votre application doit être proche de la mise en cache d’une maille.</span><span class="sxs-lookup"><span data-stu-id="c9a65-232">Many of the considerations discussed there will directly inform how your application should approach mesh caching.</span></span> <span data-ttu-id="c9a65-233">Vous devez envisager comment l’utilisateur parcourt l’environnement, les surfaces sont nécessaires, lorsque les différentes surfaces seront arrêtées et lorsque les modifications dans l’environnement doivent être capturées.</span><span class="sxs-lookup"><span data-stu-id="c9a65-233">You should consider how the user moves through the environment, which surfaces are needed, when different surfaces will be observed and when changes in the environment should be captured.</span></span>

<span data-ttu-id="c9a65-234">Lors de l’interprétation de l’événement 'surfaces modifié' fourni par l’aire de conception observateur, la maille base logique de la mise en cache est la suivante :</span><span class="sxs-lookup"><span data-stu-id="c9a65-234">When interpreting the 'surfaces changed' event provided by the surface observer, the basic mesh caching logic is as follows:</span></span>
* <span data-ttu-id="c9a65-235">Si l’application voit un ID de surface spatial qui n’a pas vu avant, il doit le traiter comme une surface spatiale.</span><span class="sxs-lookup"><span data-stu-id="c9a65-235">If the application sees a spatial surface ID that it has not seen before, it should treat this as a new spatial surface.</span></span>
* <span data-ttu-id="c9a65-236">Si l’application voit une surface spatiale avec un ID connu, mais avec une nouvelle heure de mise à jour, il doit traiter ceci comme une surface spatiale mis à jour.</span><span class="sxs-lookup"><span data-stu-id="c9a65-236">If the application sees a spatial surface with a known ID but with a new update time, it should treat this as an updated spatial surface.</span></span>
* <span data-ttu-id="c9a65-237">Si l’application ne détecte plus une surface spatiale avec un ID connu, il doit le traiter comme une surface spatiale supprimée.</span><span class="sxs-lookup"><span data-stu-id="c9a65-237">If the application no longer sees a spatial surface with a known ID, it should treat this as a removed spatial surface.</span></span>

<span data-ttu-id="c9a65-238">C’est à chaque application à puis choisissez les options suivantes :</span><span class="sxs-lookup"><span data-stu-id="c9a65-238">It is up to each application to then make the following choices:</span></span>
* <span data-ttu-id="c9a65-239">Pour les nouvelles surfaces spatiales, maille doit être demandée ?</span><span class="sxs-lookup"><span data-stu-id="c9a65-239">For new spatial surfaces, should mesh be requested?</span></span>
   * <span data-ttu-id="c9a65-240">En règle générale maille doit être demandée immédiatement pour les nouvelles surfaces spatiales, qui peuvent fournir de nouvelles informations utiles à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c9a65-240">Generally mesh should be requested immediately for new spatial surfaces, which may provide useful new information to the user.</span></span>
   * <span data-ttu-id="c9a65-241">Toutefois, les nouvelles surfaces spatiales près et devant l’utilisateur doivent être prioritaires et leur maille doit être demandée tout d’abord.</span><span class="sxs-lookup"><span data-stu-id="c9a65-241">However, new spatial surfaces near and in front of the user should be given priority and their mesh should be requested first.</span></span>
   * <span data-ttu-id="c9a65-242">Si le nouveau maillage n’est pas nécessaire, si par exemple l’application a définitivement ou temporairement « figée » son modèle de l’environnement, puis il ne doit pas être demandée.</span><span class="sxs-lookup"><span data-stu-id="c9a65-242">If the new mesh is not needed, if for example the application has permanently or temporarily 'frozen' its model of the environment, then it should not be requested.</span></span>
* <span data-ttu-id="c9a65-243">Pour les surfaces spatiales mis à jour, maille doit être demandée ?</span><span class="sxs-lookup"><span data-stu-id="c9a65-243">For updated spatial surfaces, should mesh be requested?</span></span>
   * <span data-ttu-id="c9a65-244">Mise à jour de surfaces spatiales près et devant l’utilisateur doivent être prioritaires et leur maille doit être demandée tout d’abord.</span><span class="sxs-lookup"><span data-stu-id="c9a65-244">Updated spatial surfaces near and in front of the user should be given priority and their mesh should be requested first.</span></span>
   * <span data-ttu-id="c9a65-245">Il peut également être appropriée donner une priorité plus élevée aux surfaces de nouveau qu’à la mise à jour de surfaces, en particulier au cours de l’expérience d’analyse.</span><span class="sxs-lookup"><span data-stu-id="c9a65-245">It may also be appropriate to give higher priority to new surfaces than to updated surfaces, especially during the scanning experience.</span></span>
   * <span data-ttu-id="c9a65-246">Pour limiter les coûts de traitement, les applications peuvent souhaiter limiter la fréquence à laquelle ils traitent les mises à jour aux surfaces spatiales.</span><span class="sxs-lookup"><span data-stu-id="c9a65-246">To limit processing costs, applications may wish to throttle the rate at which they process updates to spatial surfaces.</span></span>
   * <span data-ttu-id="c9a65-247">Il peut être possible de déduire que les modifications apportées à une surface spatiale sont mineures, par exemple si les limites de la surface sont petits, auquel cas la mise à jour ne peut pas être suffisamment important pour les processus.</span><span class="sxs-lookup"><span data-stu-id="c9a65-247">It may be possible to infer that changes to a spatial surface are minor, for example if the bounds of the surface are small, in which case the update may not be important enough to process.</span></span>
   * <span data-ttu-id="c9a65-248">Mises à jour aux surfaces spatiales en dehors de la zone d’intérêt de l’utilisateur en cours peuvent être ignorés entièrement, bien que dans ce cas, il peut être plus efficace pour modifier les volumes englobants spatiales en cours d’utilisation par l’aire de conception observateur.</span><span class="sxs-lookup"><span data-stu-id="c9a65-248">Updates to spatial surfaces outside the current region of interest of the user may be ignored entirely, though in this case it may be more efficient to modify the spatial bounding volumes in use by the surface observer.</span></span>
* <span data-ttu-id="c9a65-249">Pour les surfaces spatiales supprimés, maille doit être supprimé ?</span><span class="sxs-lookup"><span data-stu-id="c9a65-249">For removed spatial surfaces, should mesh be discarded?</span></span>
   * <span data-ttu-id="c9a65-250">En règle générale maille doit être ignoré en immédiatement pour les surfaces spatiales supprimés, afin que les occlusion hologramme reste correcte.</span><span class="sxs-lookup"><span data-stu-id="c9a65-250">Generally mesh should be discarded immediately for removed spatial surfaces, so that hologram occlusion remains correct.</span></span>
   * <span data-ttu-id="c9a65-251">Toutefois, si l’application a des raisons de croire qu’une surface spatiale s’affiche à nouveau peu de temps (peut-être en fonction de la conception de l’expérience utilisateur), il peut être plus efficace pour être conservé que to ignorer son maillage et le recréer ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="c9a65-251">However, if the application has reason to believe that a spatial surface will reappear shortly (perhaps based upon the design of the user experience), then it may be more efficient to retain it than to discard its mesh and recreate it again later.</span></span>
   * <span data-ttu-id="c9a65-252">Si un modèle à grande échelle de l’environnement utilisateur est créée à l’application puis elle pas souhaitera peut-être ignorer les mailles du tout.</span><span class="sxs-lookup"><span data-stu-id="c9a65-252">If the application is building a large-scale model of the user's environment then it may not wish to discard any meshes at all.</span></span> <span data-ttu-id="c9a65-253">Il sera toujours besoin de limiter l’utilisation des ressources, éventuellement en mailles de mise en attente sur le disque comme surfaces spatiales disparaissent.</span><span class="sxs-lookup"><span data-stu-id="c9a65-253">It will still need to limit resource usage though, possibly by spooling meshes to disk as spatial surfaces disappear.</span></span>
   * <span data-ttu-id="c9a65-254">Notez que certains événements relativement rares lors de la génération de surface spatiale peuvent entraîner des surfaces spatiales à remplacer par les nouvelles surfaces spatiales dans un emplacement similaire, mais avec des ID différents.</span><span class="sxs-lookup"><span data-stu-id="c9a65-254">Note that some relatively rare events during spatial surface generation can cause spatial surfaces to be replaced by new spatial surfaces in a similar location but with different IDs.</span></span> <span data-ttu-id="c9a65-255">Par conséquent, les applications que vous choisissez de ne pas ignorer une surface supprimée votre attention pas à la fin de plusieurs hautement overlapped spatial surface maillages couvrant le même emplacement.</span><span class="sxs-lookup"><span data-stu-id="c9a65-255">Consequently, applications that choose not to discard a removed surface should take care not to end up with multiple highly-overlapped spatial surface meshes covering the same location.</span></span>
* <span data-ttu-id="c9a65-256">Maillage doit être ignoré pour d’autres surfaces spatiales ?</span><span class="sxs-lookup"><span data-stu-id="c9a65-256">Should mesh be discarded for any other spatial surfaces?</span></span>
   * <span data-ttu-id="c9a65-257">Même lorsqu’il existe une surface spatiale, si elle n’est plus utile de l’expérience utilisateur puis, il doit être ignoré.</span><span class="sxs-lookup"><span data-stu-id="c9a65-257">Even while a spatial surface exists, if it is no longer useful to the user's experience then it should be discarded.</span></span> <span data-ttu-id="c9a65-258">Par exemple, si l’application 'remplace' la salle de l’autre côté d’une porte ouverte par un autre espace virtuel puis les surfaces spatiales dans cet espace n’est plus important.</span><span class="sxs-lookup"><span data-stu-id="c9a65-258">For example, if the application 'replaces' the room on the other side of a doorway with an alternate virtual space then the spatial surfaces in that room no longer matter.</span></span>

<span data-ttu-id="c9a65-259">Voici une stratégie exemple maille mise en cache, à l’aide des hystérésis spatiales et temporelles :</span><span class="sxs-lookup"><span data-stu-id="c9a65-259">Here is an example mesh caching strategy, using spatial and temporal hysteresis:</span></span>
* <span data-ttu-id="c9a65-260">Considérez une application qui souhaite utiliser un volume spatial en forme frustum d’intérêt qui suit le regard de l’utilisateur car elles observer cet onglet et Parcourir.</span><span class="sxs-lookup"><span data-stu-id="c9a65-260">Consider an application that wishes to use a frustum-shaped spatial volume of interest that follows the user's gaze as they look around and walk around.</span></span>
* <span data-ttu-id="c9a65-261">Une surface spatiale peut-être disparaître temporairement de ce volume simplement parce que l’utilisateur recherche la surface ou étapes supplémentaires depuis celle-ci... à l’examen ou se rapproche de nouveau un peu plus tard.</span><span class="sxs-lookup"><span data-stu-id="c9a65-261">A spatial surface may disappear temporarily from this volume simply because the user looks away from the surface or steps further away from it... only to look back or moves closer again a moment later.</span></span> <span data-ttu-id="c9a65-262">Dans ce cas, en supprimant et en recréer la maille pour cette aire représente beaucoup de traitement redondant.</span><span class="sxs-lookup"><span data-stu-id="c9a65-262">In this case, discarding and re-creating the mesh for this surface represents a lot of redundant processing.</span></span>
* <span data-ttu-id="c9a65-263">Pour réduire le nombre de modifications traitées, l’application utilise deux observateurs surfaces spatiales, un contenu dans l’autre.</span><span class="sxs-lookup"><span data-stu-id="c9a65-263">To reduce the number of changes processed, the application uses two spatial surface observers, one contained within the other.</span></span> <span data-ttu-id="c9a65-264">Le plus grand volume est sphérique et suit l’utilisateur tardivement ; Il déplace uniquement lorsque cela est nécessaire pour vous assurer que son centre se trouve dans 2.0 mètres de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c9a65-264">The larger volume is spherical and follows the user 'lazily'; it only moves when necessary to ensure that its centre is within 2.0 metres of the user.</span></span>
* <span data-ttu-id="c9a65-265">Les mailles surfaces spatiales nouveaux et mis à jour sont toujours traitées à partir de l’Observateur surface interne le plus petit, mais les mailles sont mis en cache jusqu'à ce qu’elles disparaissent de l’Observateur de surface externe plus grande.</span><span class="sxs-lookup"><span data-stu-id="c9a65-265">New and updated spatial surface meshes are always processed from the smaller inner surface observer, but meshes are cached until they disappear from the larger outer surface observer.</span></span> <span data-ttu-id="c9a65-266">Cela permet à l’application éviter le traitement de nombreuses modifications redondantes due au déplacement des utilisateurs locaux.</span><span class="sxs-lookup"><span data-stu-id="c9a65-266">This allows the application to avoid processing many redundant changes due to local user movement.</span></span>
* <span data-ttu-id="c9a65-267">Dans la mesure où une surface spatiale peut également disparaître temporairement en raison de suivi de la perte, l’application diffère également rejet surfaces spatiales supprimés au cours de suivi de la perte.</span><span class="sxs-lookup"><span data-stu-id="c9a65-267">Since a spatial surface may also disappear temporarily due to tracking loss, the application also defers discarding removed spatial surfaces during tracking loss.</span></span>
* <span data-ttu-id="c9a65-268">En général, une application doit évaluer le compromis entre la mise à jour réduit le traitement et l’utilisation accrue de la mémoire afin de déterminer sa stratégie de mise en cache idéale.</span><span class="sxs-lookup"><span data-stu-id="c9a65-268">In general, an application should evaluate the tradeoff between reduced update processing and increased memory usage to determine its ideal caching strategy.</span></span>

## <a name="rendering"></a><span data-ttu-id="c9a65-269">Rendu</span><span class="sxs-lookup"><span data-stu-id="c9a65-269">Rendering</span></span>

<span data-ttu-id="c9a65-270">Il existe trois méthodes principales dans lequel les mailles de mappage spatial ont tendance à être utilisée pour le rendu :</span><span class="sxs-lookup"><span data-stu-id="c9a65-270">There are three primary ways in which spatial mapping meshes tend to be used for rendering:</span></span>
* <span data-ttu-id="c9a65-271">Pour la visualisation de l’aire de conception</span><span class="sxs-lookup"><span data-stu-id="c9a65-271">For surface visualization</span></span>
   * <span data-ttu-id="c9a65-272">Il est souvent utile de visualiser les surfaces spatiales directement.</span><span class="sxs-lookup"><span data-stu-id="c9a65-272">It is often useful to visualize spatial surfaces directly.</span></span> <span data-ttu-id="c9a65-273">Par exemple, 'shadows de conversion' à partir d’objets sur les surfaces spatiales peuvent fournir visuelles utiles à l’utilisateur pendant qu’ils sont mise hologrammes sur les surfaces.</span><span class="sxs-lookup"><span data-stu-id="c9a65-273">For example, casting 'shadows' from objects onto spatial surfaces can provide helpful visual feedback to the user while they are placing holograms on surfaces.</span></span>
   * <span data-ttu-id="c9a65-274">Une chose à l’esprit est que mailles spatiales sont différents pour le genre de mailles un artiste 3D peut créer.</span><span class="sxs-lookup"><span data-stu-id="c9a65-274">One thing to bear in mind is that spatial meshes are different to the kind of meshes that a 3D artist might create.</span></span> <span data-ttu-id="c9a65-275">La topologie de triangle ne sera pas aussi « propre » que topologie créés par l’homme et la maille subira des [diverses erreurs](spatial-mapping-design.md#what-influences-spatial-mapping-quality).</span><span class="sxs-lookup"><span data-stu-id="c9a65-275">The triangle topology will not be as 'clean' as human-created topology, and the mesh will suffer from [various errors](spatial-mapping-design.md#what-influences-spatial-mapping-quality).</span></span>
   * <span data-ttu-id="c9a65-276">Pour créer une esthétique visual agréable, vous pouvez souhaiter donc effectuer certaines [mesh traitement](spatial-mapping.md#mesh-processing), par exemple pour les trous de remplissage ou de normales de surface lisses.</span><span class="sxs-lookup"><span data-stu-id="c9a65-276">In order to create a pleasing visual aesthetic, you may thus want to perform some [mesh processing](spatial-mapping.md#mesh-processing), for example to fill holes or smooth surface normals.</span></span> <span data-ttu-id="c9a65-277">Vous pouvez également utiliser un nuanceur à textures conçues par l’artiste de projet sur votre maillage au lieu de la visualisation directement la topologie de maille et normales.</span><span class="sxs-lookup"><span data-stu-id="c9a65-277">You may also wish to use a shader to project artist-designed textures onto your mesh instead of directly visualizing mesh topology and normals.</span></span>
* <span data-ttu-id="c9a65-278">D’occlusion hologrammes derrière les surfaces du monde réel</span><span class="sxs-lookup"><span data-stu-id="c9a65-278">For occluding holograms behind real-world surfaces</span></span>
   * <span data-ttu-id="c9a65-279">Surfaces spatiaux peuvent être rendus dans un test de profondeur qui affecte uniquement le [tampon de profondeur](https://msdn.microsoft.com/library/windows/desktop/bb219616(v=vs.85).aspx) et n’affecte pas les cibles de rendu de couleur.</span><span class="sxs-lookup"><span data-stu-id="c9a65-279">Spatial surfaces can be rendered in a depth-only pass which only affects the [depth buffer](https://msdn.microsoft.com/library/windows/desktop/bb219616(v=vs.85).aspx) and does not affect color render targets.</span></span>
   * <span data-ttu-id="c9a65-280">Cela prépare la mémoire tampon de profondeur pour occlude restitué par la suite les hologrammes derrière les surfaces spatiales.</span><span class="sxs-lookup"><span data-stu-id="c9a65-280">This primes the depth buffer to occlude subsequently-rendered holograms behind spatial surfaces.</span></span> <span data-ttu-id="c9a65-281">Occlusion précise de hologrammes améliore le sens que hologrammes existent réellement dans l’espace physique de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c9a65-281">Accurate occlusion of holograms enhances the sense that holograms really exist within the user's physical space.</span></span>
   * <span data-ttu-id="c9a65-282">Pour activer le rendu de profondeur uniquement, mettre à jour votre état de fusion pour définir le [RenderTargetWriteMask](https://msdn.microsoft.com/library/windows/desktop/hh404492(v=vs.85).aspx) à zéro pour la couleur de toutes les cibles de rendu.</span><span class="sxs-lookup"><span data-stu-id="c9a65-282">To enable depth-only rendering, update your blend state to set the [RenderTargetWriteMask](https://msdn.microsoft.com/library/windows/desktop/hh404492(v=vs.85).aspx) to zero for all color render targets.</span></span>
* <span data-ttu-id="c9a65-283">Pour modifier l’apparence de hologrammes bloqués par les surfaces du monde réel</span><span class="sxs-lookup"><span data-stu-id="c9a65-283">For modifying the appearance of holograms occluded by real-world surfaces</span></span>
   * <span data-ttu-id="c9a65-284">Géométrie normalement rendu est masqué quand il est bloqué.</span><span class="sxs-lookup"><span data-stu-id="c9a65-284">Normally rendered geometry is hidden when it is occluded.</span></span> <span data-ttu-id="c9a65-285">Pour cela en définissant la fonction de profondeur dans votre [état du stencil de profondeur](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx) à « inférieur ou égal », ce qui entraîne la géométrie à être visible que s’il est **plus en détail** à l’appareil photo que tous les rendus précédemment géométrie.</span><span class="sxs-lookup"><span data-stu-id="c9a65-285">This is achieved by setting the depth function in your [depth-stencil state](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx) to "less than or equal", which causes geometry to be visible only where it is **closer** to the camera than all previously rendered geometry.</span></span>
   * <span data-ttu-id="c9a65-286">Toutefois, il peut être utile de conserver certains géométrie visible même quand il est bloqué et modifier son apparence lorsque bloqués comme un moyen de fournir des commentaires visuels à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c9a65-286">However, it may be useful to keep certain geometry visible even when it is occluded, and to modify its appearance when occluded as a way of providing visual feedback to the user.</span></span> <span data-ttu-id="c9a65-287">Par exemple, cela permet à l’application afficher l’utilisateur de l’emplacement d’un objet tout en rendant plus clair que se trouve derrière une surface du monde réel.</span><span class="sxs-lookup"><span data-stu-id="c9a65-287">For example, this allows the application to show the user the location of an object whilst making it clear that is behind a real-world surface.</span></span>
   * <span data-ttu-id="c9a65-288">Pour ce faire, afficher la géométrie une deuxième fois avec un nuanceur de différentes qui crée l’apparence souhaitée « bouché ».</span><span class="sxs-lookup"><span data-stu-id="c9a65-288">To achieve this, render the geometry a second time with a different shader that creates the desired 'occluded' appearance.</span></span> <span data-ttu-id="c9a65-289">Avant le rendu de la géométrie pour la deuxième fois, apporter deux modifications à votre [état du stencil de profondeur](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="c9a65-289">Before rendering the geometry for the second time, make two changes to your [depth-stencil state](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx).</span></span> <span data-ttu-id="c9a65-290">Tout d’abord, la valeur est la fonction de profondeur « supérieur ou égal à » afin que la géométrie sera visible uniquement lorsqu’il est **plus** à partir de l’appareil photo à toute la géométrie précédemment rendue.</span><span class="sxs-lookup"><span data-stu-id="c9a65-290">First, set the depth function to "greater than or equal" so that the geometry will be visible only where it is **further** from the camera than all previously rendered geometry.</span></span> <span data-ttu-id="c9a65-291">Ensuite, définissez le DepthWriteMask à zéro, afin que la mémoire tampon de profondeur ne sera pas modifié (le tampon de profondeur doit continuer représenter la profondeur de la géométrie **le plus proche** à l’appareil photo).</span><span class="sxs-lookup"><span data-stu-id="c9a65-291">Second, set the DepthWriteMask to zero, so that the depth buffer will not be modified (the depth buffer should continue to represent the depth of the geometry **closest** to the camera).</span></span>

<span data-ttu-id="c9a65-292">[Performances](understanding-performance-for-mixed-reality.md) est une préoccupation importante lors du rendu des mailles de mappage spatial.</span><span class="sxs-lookup"><span data-stu-id="c9a65-292">[Performance](understanding-performance-for-mixed-reality.md) is an important concern when rendering spatial mapping meshes.</span></span> <span data-ttu-id="c9a65-293">Voici quelques techniques de performances de rendu spécifiques au rendu des mailles de mappage spatial :</span><span class="sxs-lookup"><span data-stu-id="c9a65-293">Here are some rendering performance techniques specific to rendering spatial mapping meshes:</span></span>
* <span data-ttu-id="c9a65-294">Ajuster la densité de triangle</span><span class="sxs-lookup"><span data-stu-id="c9a65-294">Adjust triangle density</span></span>
   * <span data-ttu-id="c9a65-295">Lors de la surface spatiale demandeur maille à partir de votre aire de conception observateur, demander la densité la plus basse des maillages de triangle est suffisante pour vos besoins.</span><span class="sxs-lookup"><span data-stu-id="c9a65-295">When requesting spatial surface meshes from your surface observer, request the lowest density of triangle meshes that will suffice for your needs.</span></span>
   * <span data-ttu-id="c9a65-296">Il peut être judicieux pour faire varier la densité de triangle sur une base de la surface en surface, en fonction de la distance de la surface de l’utilisateur et sa pertinence dans l’expérience utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c9a65-296">It may make sense to vary triangle density on a surface by surface basis, depending on the surface's distance from the user, and its relevance to the user experience.</span></span>
   * <span data-ttu-id="c9a65-297">Nombres de triangle réduire permet de réduire l’utilisation de mémoire et les coûts de traitement de vertex sur le GPU, bien que cela n’affectera pas les coûts de traitement de pixels.</span><span class="sxs-lookup"><span data-stu-id="c9a65-297">Reducing triangle counts will reduce memory usage and vertex processing costs on the GPU, though it will not affect pixel processing costs.</span></span>
* <span data-ttu-id="c9a65-298">Effectue l’élimination de frustum</span><span class="sxs-lookup"><span data-stu-id="c9a65-298">Perform frustum culling</span></span>
   * <span data-ttu-id="c9a65-299">Élimination de frustum ignore les objets de dessin qui ne sont pas visibles, car elles sont en dehors de la frustum affichage actuel.</span><span class="sxs-lookup"><span data-stu-id="c9a65-299">Frustum culling skips drawing objects that cannot be seen because they are outside the current display frustum.</span></span> <span data-ttu-id="c9a65-300">Cela réduit les coûts de traitement CPU et GPU.</span><span class="sxs-lookup"><span data-stu-id="c9a65-300">This reduces both CPU and GPU processing costs.</span></span>
   * <span data-ttu-id="c9a65-301">Dans la mesure où l’élimination est effectuée sur une base par maille et surfaces spatiaux peuvent être volumineux, avec rupture chaque maillage de surface spatiale en segments plus petits peut entraîner l’élimination plus efficace (où moins triangles hors écran sont rendus).</span><span class="sxs-lookup"><span data-stu-id="c9a65-301">Since culling is performed on a per-mesh basis and spatial surfaces can be large, breaking each spatial surface mesh into smaller chunks may result in more efficient culling (in that fewer offscreen triangles are rendered).</span></span> <span data-ttu-id="c9a65-302">Il existe un compromis, toutefois ; les mailles plus que vous avez, les appels de dessin plus que vous devez vous, ce qui peuvent augmenter les coûts de processeur.</span><span class="sxs-lookup"><span data-stu-id="c9a65-302">There is a tradeoff, however; the more meshes you have, the more draw calls you must make, which can increase CPU costs.</span></span> <span data-ttu-id="c9a65-303">Dans un cas extrême, le frustum élimination de calculs eux-mêmes peut même avoir un coût UC mesurable.</span><span class="sxs-lookup"><span data-stu-id="c9a65-303">In an extreme case, the frustum culling calculations themselves could even have a measurable CPU cost.</span></span>
* <span data-ttu-id="c9a65-304">Ajuster l’ordre de rendu</span><span class="sxs-lookup"><span data-stu-id="c9a65-304">Adjust rendering order</span></span>
   * <span data-ttu-id="c9a65-305">Surfaces spatiales ont tendance à être volumineuses, car ils représentent un environnement de l’utilisateur qui les entoure.</span><span class="sxs-lookup"><span data-stu-id="c9a65-305">Spatial surfaces tend to be large, because they represent the user's entire environment surrounding them.</span></span> <span data-ttu-id="c9a65-306">Les coûts sur le GPU de traitement de pixels peut être élevée, en particulier dans les cas où il existe plusieurs couches de géométrie visible (y compris les surfaces spatiales et autres hologrammes).</span><span class="sxs-lookup"><span data-stu-id="c9a65-306">Pixel processing costs on the GPU can thus be high, especially in cases where there is more than one layer of visible geometry (including both spatial surfaces and other holograms).</span></span> <span data-ttu-id="c9a65-307">Dans ce cas, la couche plus proche de l’utilisateur sera être OCCLUSION des couches plus tout de suite, afin de n’importe quel GPU temps ces couches plus éloignées de rendu est gaspillée.</span><span class="sxs-lookup"><span data-stu-id="c9a65-307">In this case, the layer nearest to the user will be occluding any layers further away, so any GPU time spent rendering those more distant layers is wasted.</span></span>
   * <span data-ttu-id="c9a65-308">Pour réduire ce travail redondant sur le GPU, il est utile de surfaces opaques s’affichent dans l’ordre de l’avant vers l’arrière (ceux qui sont plus en détail tout d’abord, plus éloignées de celles de la dernière).</span><span class="sxs-lookup"><span data-stu-id="c9a65-308">To reduce this redundant work on the GPU, it helps to render opaque surfaces in front-to-back order (closer ones first, more distant ones last).</span></span> <span data-ttu-id="c9a65-309">Par « opaque » nous entendons les surfaces pour lequel le DepthWriteMask est défini sur 1 dans votre [état du stencil de profondeur](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="c9a65-309">By 'opaque' we mean surfaces for which the DepthWriteMask is set to one in your [depth-stencil state](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx).</span></span> <span data-ttu-id="c9a65-310">Lorsque les surfaces le plus proche sont restitués, ils seront amorcer le tampon de profondeur afin que les surfaces plus longues sont efficacement ignorés par le processeur de pixels sur le GPU.</span><span class="sxs-lookup"><span data-stu-id="c9a65-310">When the nearest surfaces are rendered, they will prime the depth buffer so that more distant surfaces are efficiently skipped by the pixel processor on the GPU.</span></span>

## <a name="mesh-processing"></a><span data-ttu-id="c9a65-311">Traitement de maillage</span><span class="sxs-lookup"><span data-stu-id="c9a65-311">Mesh Processing</span></span>

<span data-ttu-id="c9a65-312">Une application peut souhaiter effectuer [diverses opérations](spatial-mapping.md#mesh-processing) sur des mailles surfaces spatiales en fonction de ses besoins.</span><span class="sxs-lookup"><span data-stu-id="c9a65-312">An application may want to perform [various operations](spatial-mapping.md#mesh-processing) on spatial surface meshes to suit its needs.</span></span> <span data-ttu-id="c9a65-313">Les données d’index et de sommet fournies avec chaque maillage de surface spatiale utilisent la même disposition familier comme le [mémoires tampons de vertex et d’index](https://msdn.microsoft.com/library/windows/desktop/bb147325%28v=vs.85%29.aspx) qui sont utilisés pour le rendu des maillages de triangle dans le rendu moderne toutes les API.</span><span class="sxs-lookup"><span data-stu-id="c9a65-313">The index and vertex data provided with each spatial surface mesh uses the same familiar layout as the [vertex and index buffers](https://msdn.microsoft.com/library/windows/desktop/bb147325%28v=vs.85%29.aspx) that are used for rendering triangle meshes in all modern rendering APIs.</span></span> <span data-ttu-id="c9a65-314">Toutefois, les faits clés à connaître est que les triangles mappage spatial ont un **front-dans le sens horaire ordre d’enroulement**.</span><span class="sxs-lookup"><span data-stu-id="c9a65-314">However, one key fact to be aware of is that spatial mapping triangles have a **front-clockwise winding order**.</span></span> <span data-ttu-id="c9a65-315">Chaque triangle est représenté par trois index de vertex dans la mémoire tampon d’index de la maille et ces index identifiera les vertex du triangle dans un **dans le sens horaire** ordre, le triangle est affiché dans le **front** côté.</span><span class="sxs-lookup"><span data-stu-id="c9a65-315">Each triangle is represented by three vertex indices in the mesh's index buffer and these indices will identify the triangle's vertices in a **clockwise** order, when the triangle is viewed from the **front** side.</span></span> <span data-ttu-id="c9a65-316">Début côté (ou de l’extérieur) des maillages de surface spatiales correspond évidemment à la face avant (visible) des surfaces du monde réel.</span><span class="sxs-lookup"><span data-stu-id="c9a65-316">The front side (or outside) of spatial surface meshes corresponds as you would expect to the front (visible) side of real world surfaces.</span></span>

<span data-ttu-id="c9a65-317">Les applications doivent réaliser uniquement simplification de maille si la densité de triangle plus grossière fournie par l’aire de conception observateur est toujours insuffisamment grossier, ce travail calculs est onéreux et déjà en cours d’exécution par le runtime pour générer les différents fourni des niveaux de détail.</span><span class="sxs-lookup"><span data-stu-id="c9a65-317">Applications should only perform mesh simplification if the coarsest triangle density provided by the surface observer is still insufficiently coarse - this work is computationally expensive and already being performed by the runtime to generate the various provided levels of detail.</span></span>

<span data-ttu-id="c9a65-318">Étant donné que chaque aire de conception observateur puisse fournir plusieurs surfaces spatiales non connectés, certaines applications souhaiterez peut-être ajuster ces données spatiales surface maillages contre chaque glissière autre, puis à leur ensemble.</span><span class="sxs-lookup"><span data-stu-id="c9a65-318">Because each surface observer can provide multiple unconnected spatial surfaces, some applications may wish to clip these spatial surface meshes against each other, then zipper them together.</span></span> <span data-ttu-id="c9a65-319">En règle générale, l’étape de découpage est nécessaire, comme les plus proches des maillages de surface spatiales souvent se chevauchent légèrement.</span><span class="sxs-lookup"><span data-stu-id="c9a65-319">In general, the clipping step is required, as nearby spatial surface meshes often overlap slightly.</span></span>

## <a name="raycasting-and-collision"></a><span data-ttu-id="c9a65-320">Raycasting et Collision</span><span class="sxs-lookup"><span data-stu-id="c9a65-320">Raycasting and Collision</span></span>

<span data-ttu-id="c9a65-321">Dans l’ordre pour un API physique (tel que [Havok](http://www.havok.com/)) pour fournir une application avec des fonctionnalités raycasting et de collision pour les surfaces spatiales, l’application doit fournir la surface spatiale maillages à l’API physique.</span><span class="sxs-lookup"><span data-stu-id="c9a65-321">In order for a physics API (such as [Havok](http://www.havok.com/)) to provide an application with raycasting and collision functionality for spatial surfaces, the application must provide spatial surface meshes to the physics API.</span></span> <span data-ttu-id="c9a65-322">Les mailles souvent utilisées pour physique ont les propriétés suivantes :</span><span class="sxs-lookup"><span data-stu-id="c9a65-322">Meshes used for physics often have the following properties:</span></span>
* <span data-ttu-id="c9a65-323">Elles contiennent uniquement de petits nombres de triangles.</span><span class="sxs-lookup"><span data-stu-id="c9a65-323">They contain only small numbers of triangles.</span></span> <span data-ttu-id="c9a65-324">Opérations de physique sont plus intensifs que les opérations de rendu.</span><span class="sxs-lookup"><span data-stu-id="c9a65-324">Physics operations are more computationally intensive than rendering operations.</span></span>
* <span data-ttu-id="c9a65-325">Ils sont « eau étroite ».</span><span class="sxs-lookup"><span data-stu-id="c9a65-325">They are 'water-tight'.</span></span> <span data-ttu-id="c9a65-326">Surfaces destinées à être solid ne doivent pas avoir de petits trous dans mêmes trous trop petits pour être visible peuvent entraîner des problèmes.</span><span class="sxs-lookup"><span data-stu-id="c9a65-326">Surfaces intended to be solid should not have small holes in them; even holes too small to be visible can cause problems.</span></span>
* <span data-ttu-id="c9a65-327">Ils sont convertis en balles convexes.</span><span class="sxs-lookup"><span data-stu-id="c9a65-327">They are converted into convex hulls.</span></span> <span data-ttu-id="c9a65-328">Convexe ont plusieurs polygones issues et sont libres de trous, et ils sont beaucoup plus de calculs efficaces pour traiter que les maillages de triangle brutes.</span><span class="sxs-lookup"><span data-stu-id="c9a65-328">Convex hulls have few polygons and are free of holes, and they are much more computationally efficient to process than raw triangle meshes.</span></span>

<span data-ttu-id="c9a65-329">Lorsque raycasts performantes par rapport à surfaces spatiales, n’oubliez pas que ces surfaces sont souvent complexes, formes encombrés complètes des détails peu confuses - simples comme votre bureau !</span><span class="sxs-lookup"><span data-stu-id="c9a65-329">When performing raycasts against spatial surfaces, bear in mind that these surfaces are often complex, cluttered shapes full of messy little details - just like your desk!</span></span> <span data-ttu-id="c9a65-330">Cela signifie qu’un seul raycast est souvent insuffisant pour vous donner suffisamment d’informations sur la forme de la surface et la forme de l’espace vide de proximité.</span><span class="sxs-lookup"><span data-stu-id="c9a65-330">This means that a single raycast is often insufficient to give you enough information about the shape of the surface and the shape of the empty space near it.</span></span> <span data-ttu-id="c9a65-331">Il est donc généralement une bonne idée pour effectuer de nombreuses raycasts au sein d’une petite zone et à utiliser les résultats d’agrégation pour dériver une compréhension plus fiable de la surface.</span><span class="sxs-lookup"><span data-stu-id="c9a65-331">It is thus usually a good idea to perform many raycasts within a small area and to use the aggregate results to derive a more reliable understanding of the surface.</span></span> <span data-ttu-id="c9a65-332">Par exemple, à l’aide de la moyenne des 10 raycasts guide hologramme placement sur une aire de produira un résultat beaucoup plus lisse et moins instable qui utilise simplement un raycast unique.</span><span class="sxs-lookup"><span data-stu-id="c9a65-332">For example, using the average of 10 raycasts to guide hologram placement on a surface will yield a far smoother and less 'jittery' result that using just a single raycast.</span></span>

<span data-ttu-id="c9a65-333">Toutefois, n’oubliez pas que chaque raycast peut avoir un coût élevé de calcul.</span><span class="sxs-lookup"><span data-stu-id="c9a65-333">However, bear in mind that each raycast can have a high computational cost.</span></span> <span data-ttu-id="c9a65-334">Par conséquent, en fonction de votre scénario d’utilisation vous devez compenser le coût de calcul de raycasts supplémentaires (effectuée chaque trame) sur le coût de calcul [mesh traitement](spatial-mapping.md#mesh-processing) lisse et de supprimer des trous dans les surfaces spatial ( effectuée lorsque les mailles spatiales sont mis à jour).</span><span class="sxs-lookup"><span data-stu-id="c9a65-334">Thus depending on your usage scenario you should trade off the computational cost of additional raycasts (performed every frame) against the computational cost of [mesh processing](spatial-mapping.md#mesh-processing) to smooth and remove holes in spatial surfaces (performed when spatial meshes are updated).</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="c9a65-335">Résolution des problèmes</span><span class="sxs-lookup"><span data-stu-id="c9a65-335">Troubleshooting</span></span>
* <span data-ttu-id="c9a65-336">Dans l’ordre pour les panneaux de surface d’exposition être correctement orienté, chaque GameObject doit être active avant d’être envoyé à la SurfaceObeserver d’avoir son maillage construit.</span><span class="sxs-lookup"><span data-stu-id="c9a65-336">In order for the surface meshes to be orientated correctly, each GameObject needs to be active before it is sent to the SurfaceObeserver to have its mesh constructed.</span></span> <span data-ttu-id="c9a65-337">Sinon, les panneaux seront afficheront dans votre espace mais paysage en bizarres angles.</span><span class="sxs-lookup"><span data-stu-id="c9a65-337">Otherwise, the meshes will show up in your space but rotated at weird angles.</span></span>
* <span data-ttu-id="c9a65-338">Le GameObject qui exécute le script qui communique avec le SurfaceObserver doit être définie à l’origine.</span><span class="sxs-lookup"><span data-stu-id="c9a65-338">The GameObject that runs the script that communicates with the SurfaceObserver needs to be set to the origin.</span></span> <span data-ttu-id="c9a65-339">Sinon, tous les GameObjects que vous créez et envoyez à la SurfaceObserver pour avoir leurs mailles construits comporte un décalage égal au décalage de l’objet de jeu de Parent.</span><span class="sxs-lookup"><span data-stu-id="c9a65-339">Otherwise, all of GameObjects that you create and send to the SurfaceObserver to have their meshes constructed will have an offset equal to the offset of the Parent Game Object.</span></span> <span data-ttu-id="c9a65-340">Cela peut rendre votre mailles affichent plusieurs mètres ce qui le rend très difficile de déboguer ce qui se passait.</span><span class="sxs-lookup"><span data-stu-id="c9a65-340">This can make your meshes show up several meters away which makes it very hard to debug what is going on.</span></span>

## <a name="see-also"></a><span data-ttu-id="c9a65-341">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="c9a65-341">See also</span></span>
* [<span data-ttu-id="c9a65-342">Systèmes de coordonnées</span><span class="sxs-lookup"><span data-stu-id="c9a65-342">Coordinate systems</span></span>](coordinate-systems.md)
* [<span data-ttu-id="c9a65-343">Mappage spatial dans DirectX</span><span class="sxs-lookup"><span data-stu-id="c9a65-343">Spatial mapping in DirectX</span></span>](spatial-mapping-in-directx.md)
* [<span data-ttu-id="c9a65-344">Mappage spatial dans Unity</span><span class="sxs-lookup"><span data-stu-id="c9a65-344">Spatial mapping in Unity</span></span>](spatial-mapping-in-unity.md)
* [<span data-ttu-id="c9a65-345">Conception de mappage spatial</span><span class="sxs-lookup"><span data-stu-id="c9a65-345">Spatial mapping design</span></span>](spatial-mapping-design.md)
* [<span data-ttu-id="c9a65-346">Étude de cas - parcourant des trous dans la réalité</span><span class="sxs-lookup"><span data-stu-id="c9a65-346">Case study - Looking through holes in your reality</span></span>](case-study-looking-through-holes-in-your-reality.md)
