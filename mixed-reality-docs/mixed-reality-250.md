---
title: MR 250 - HoloLens et des casques IMMERSIFS de partage
description: Suivez cette procédure pas à pas à l’aide de Unity, Visual Studio, HoloLens et Windows Mixed Reality casques pour connaître les détails du partage hologrammes entre les appareils de réalité mixte de codage.
author: keveleigh
ms.author: kurtie
ms.date: 03/21/2018
ms.topic: article
keywords: holotoolkit, mixedrealitytoolkit, mixedrealitytoolkit-unity, immersive, de mouvement contrôleur, le partage et la manette xbox, mise en réseau, entre les périphériques
ms.openlocfilehash: 9e1cb0d168b8bf830b4477190516cd19caef7972
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/12/2019
ms.locfileid: "59593443"
---
>[!NOTE]
><span data-ttu-id="60749-104">Les didacticiels Académie de réalité mixte ont été conçus avec HoloLens (1er gen) et des casques IMMERSIFS réalité mixte à l’esprit.</span><span class="sxs-lookup"><span data-stu-id="60749-104">The Mixed Reality Academy tutorials were designed with HoloLens (1st gen) and Mixed Reality Immersive Headsets in mind.</span></span>  <span data-ttu-id="60749-105">Par conséquent, nous estimons qu’il est important de laisser ces didacticiels en place pour les développeurs qui cherchent toujours pour obtenir des conseils de développement pour ces appareils.</span><span class="sxs-lookup"><span data-stu-id="60749-105">As such, we feel it is important to leave these tutorials in place for developers who are still looking for guidance in developing for those devices.</span></span>  <span data-ttu-id="60749-106">Ces didacticiels seront **_pas_** être mis à jour avec les ensembles d’outils ou les interactions utilisées pour HoloLens 2 dernières.</span><span class="sxs-lookup"><span data-stu-id="60749-106">These tutorials will **_not_** be updated with the latest toolsets or interactions being used for HoloLens 2.</span></span>  <span data-ttu-id="60749-107">Ils seront conservées pour continuer à travailler sur les appareils pris en charge.</span><span class="sxs-lookup"><span data-stu-id="60749-107">They will be maintained to continue working on the supported devices.</span></span> <span data-ttu-id="60749-108">Il y aura une nouvelle série de didacticiels seront publiés dans le futur qui va vous montrer comment développer pour HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="60749-108">There will be a new series of tutorials that will be posted in the future that will demonstrate how to develop for HoloLens 2.</span></span>  <span data-ttu-id="60749-109">Cet avis sera mis à jour avec un lien vers ces didacticiels lorsqu’elles sont validées.</span><span class="sxs-lookup"><span data-stu-id="60749-109">This notice will be updated with a link to those tutorials when they are posted.</span></span>

<br>

# <a name="mr-sharing-250-hololens-and-immersive-headsets"></a><span data-ttu-id="60749-110">MR 250 de partage : HoloLens et des casques IMMERSIFS</span><span class="sxs-lookup"><span data-stu-id="60749-110">MR Sharing 250: HoloLens and immersive headsets</span></span>

<span data-ttu-id="60749-111">Avec la flexibilité de plateforme universelle Windows (UWP), il est facile de créer une application qui s’étend sur plusieurs appareils.</span><span class="sxs-lookup"><span data-stu-id="60749-111">With the flexibility of Universal Windows Platform (UWP), it is easy to create an application that spans multiple devices.</span></span> <span data-ttu-id="60749-112">Grâce à cette flexibilité, nous pouvons créer des expériences exploitant les atouts de chaque appareil.</span><span class="sxs-lookup"><span data-stu-id="60749-112">With this flexibility, we can create experiences that leverage the strengths of each device.</span></span> <span data-ttu-id="60749-113">Ce didacticiel couvre une expérience partagée de base qui s’exécute sur des casques IMMERSIFS HoloLens et Windows Mixed Reality.</span><span class="sxs-lookup"><span data-stu-id="60749-113">This tutorial will cover a basic shared experience that runs on both HoloLens and Windows Mixed Reality immersive headsets.</span></span> <span data-ttu-id="60749-114">Ce contenu a été remis à l’origine lors de la conférence Microsoft Build 2017 à Seattle, WA.</span><span class="sxs-lookup"><span data-stu-id="60749-114">This content was originally delivered at the Microsoft Build 2017 conference in Seattle, WA.</span></span>

<span data-ttu-id="60749-115">**Dans ce didacticiel, nous allons :**</span><span class="sxs-lookup"><span data-stu-id="60749-115">**In this tutorial, we will:**</span></span>

* <span data-ttu-id="60749-116">Configuration d’un réseau à l’aide de UNET.</span><span class="sxs-lookup"><span data-stu-id="60749-116">Setup a network using UNET.</span></span>
* <span data-ttu-id="60749-117">Partager hologrammes entre les appareils de réalité mixte.</span><span class="sxs-lookup"><span data-stu-id="60749-117">Share holograms across mixed reality devices.</span></span>
* <span data-ttu-id="60749-118">Établir une vue différente de l’application selon le périphérique de réalité mixte est utilisé.</span><span class="sxs-lookup"><span data-stu-id="60749-118">Establish a different view of the application depending on which mixed reality device is being used.</span></span>
* <span data-ttu-id="60749-119">Créer une expérience partagée où les utilisateurs HoloLens guident les utilisateurs des casques IMMERSIFS des énigmes simples.</span><span class="sxs-lookup"><span data-stu-id="60749-119">Create a shared experience where HoloLens users guide immersive headsets users through some simple puzzles.</span></span>

## <a name="device-support"></a><span data-ttu-id="60749-120">Prise en charge des appareils</span><span class="sxs-lookup"><span data-stu-id="60749-120">Device support</span></span>

<table>
<tr>
<th><span data-ttu-id="60749-121">Cours</span><span class="sxs-lookup"><span data-stu-id="60749-121">Course</span></span></th><th style="width:150px"> <span data-ttu-id="60749-122"><a href="hololens-hardware-details.md">HoloLens</a></span><span class="sxs-lookup"><span data-stu-id="60749-122"><a href="hololens-hardware-details.md">HoloLens</a></span></span></th><th style="width:150px"> <span data-ttu-id="60749-123"><a href="immersive-headset-hardware-details.md">Casques IMMERSIFS</a></span><span class="sxs-lookup"><span data-stu-id="60749-123"><a href="immersive-headset-hardware-details.md">Immersive headsets</a></span></span></th>
</tr><tr>
<td><span data-ttu-id="60749-124">MR 250 de partage : HoloLens et des casques IMMERSIFS</span><span class="sxs-lookup"><span data-stu-id="60749-124">MR Sharing 250: HoloLens and immersive headsets</span></span></td><td style="text-align: center;"> <span data-ttu-id="60749-125">✔️</span><span class="sxs-lookup"><span data-stu-id="60749-125">✔️</span></span></td><td style="text-align: center;"> <span data-ttu-id="60749-126">✔️</span><span class="sxs-lookup"><span data-stu-id="60749-126">✔️</span></span></td>
</tr>
</table>

## <a name="before-you-start"></a><span data-ttu-id="60749-127">Avant de commencer</span><span class="sxs-lookup"><span data-stu-id="60749-127">Before you start</span></span>

### <a name="prerequisites"></a><span data-ttu-id="60749-128">Prérequis</span><span class="sxs-lookup"><span data-stu-id="60749-128">Prerequisites</span></span>

* <span data-ttu-id="60749-129">Un PC Windows 10 avec le [outils de développement nécessaire](install-the-tools.md) et [configuré pour prendre en charge un casque immersif Windows Mixed Reality](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).</span><span class="sxs-lookup"><span data-stu-id="60749-129">A Windows 10 PC with the [necessary development tools](install-the-tools.md) and [configured to support a Windows Mixed Reality immersive headset](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).</span></span>
* <span data-ttu-id="60749-130">Une manette Xbox qui fonctionne avec votre PC.</span><span class="sxs-lookup"><span data-stu-id="60749-130">An Xbox controller that works with your PC.</span></span>
* <span data-ttu-id="60749-131">Au moins un appareil HoloLens et un casque immersif.</span><span class="sxs-lookup"><span data-stu-id="60749-131">At least one HoloLens device and one immersive headset.</span></span>
* <span data-ttu-id="60749-132">Un réseau qui permet la diffusion UDP pour la découverte.</span><span class="sxs-lookup"><span data-stu-id="60749-132">A network which allows UDP Broadcast for discovery.</span></span>

### <a name="project-files"></a><span data-ttu-id="60749-133">Fichiers projet</span><span class="sxs-lookup"><span data-stu-id="60749-133">Project files</span></span>

* <span data-ttu-id="60749-134">Téléchargez le [fichiers](https://github.com/Microsoft/MixedReality250/archive/master.zip) requise par le projet.</span><span class="sxs-lookup"><span data-stu-id="60749-134">Download the [files](https://github.com/Microsoft/MixedReality250/archive/master.zip) required by the project.</span></span> <span data-ttu-id="60749-135">Extrayez les fichiers dans un facile à mémoriser l’emplacement.</span><span class="sxs-lookup"><span data-stu-id="60749-135">Extract the files to an easy to remember location.</span></span>
* <span data-ttu-id="60749-136">Ce projet requiert le [une version recommandée d’Unity avec prise en charge Windows Mixed Reality](install-the-tools.md).</span><span class="sxs-lookup"><span data-stu-id="60749-136">This project requires the [a recommended version of Unity with Windows Mixed Reality support](install-the-tools.md).</span></span>

>[!NOTE]
><span data-ttu-id="60749-137">Si vous souhaitez examiner le code source avant de télécharger, il a [disponible sur GitHub](https://github.com/Microsoft/MixedReality250).</span><span class="sxs-lookup"><span data-stu-id="60749-137">If you want to look through the source code before downloading, it's [available on GitHub](https://github.com/Microsoft/MixedReality250).</span></span>

## <a name="chapter-1---holo-world"></a><span data-ttu-id="60749-138">Chapitre 1 - Holo World</span><span class="sxs-lookup"><span data-stu-id="60749-138">Chapter 1 - Holo World</span></span>

>[!VIDEO https://www.youtube.com/embed/IC0rp6rLiEc]

### <a name="objectives"></a><span data-ttu-id="60749-139">Objectifs</span><span class="sxs-lookup"><span data-stu-id="60749-139">Objectives</span></span>

<span data-ttu-id="60749-140">Assurez-vous que l’environnement de développement est prêt à commencer avec un projet simple.</span><span class="sxs-lookup"><span data-stu-id="60749-140">Make sure the development environment is ready to go with a simple project.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="60749-141">Nous allons créer</span><span class="sxs-lookup"><span data-stu-id="60749-141">What we will build</span></span>

<span data-ttu-id="60749-142">Une application qui montre un hologramme sur HoloLens ou un casque immersif Windows Mixed Reality.</span><span class="sxs-lookup"><span data-stu-id="60749-142">An application that shows a hologram on either HoloLens or a Windows Mixed Reality immersive headset.</span></span>

### <a name="steps"></a><span data-ttu-id="60749-143">Étapes</span><span class="sxs-lookup"><span data-stu-id="60749-143">Steps</span></span>
* <span data-ttu-id="60749-144">Ouvrez Unity.</span><span class="sxs-lookup"><span data-stu-id="60749-144">Open Unity.</span></span>
    * <span data-ttu-id="60749-145">Sélectionnez **Open**.</span><span class="sxs-lookup"><span data-stu-id="60749-145">Select **Open**.</span></span>
    * <span data-ttu-id="60749-146">Accédez à où vous avez extrait les fichiers de projet.</span><span class="sxs-lookup"><span data-stu-id="60749-146">Navigate to where you extracted the project files.</span></span>
    * <span data-ttu-id="60749-147">Cliquez sur **Sélectionner un dossier**.</span><span class="sxs-lookup"><span data-stu-id="60749-147">Click **Select Folder**.</span></span>
    * <span data-ttu-id="60749-148">*Il prendra un peu tandis que pour Unity traiter le projet la première fois.*</span><span class="sxs-lookup"><span data-stu-id="60749-148">*It will take a little while for Unity to process the project the first time.*</span></span>
* <span data-ttu-id="60749-149">Vérifiez que la réalité mixte est activée dans Unity.</span><span class="sxs-lookup"><span data-stu-id="60749-149">Check that Mixed Reality is enabled in Unity.</span></span>
    * <span data-ttu-id="60749-150">Ouvrez la boîte de dialogue de paramètres de build (**CTRL + MAJ + B** ou **fichier > Paramètres de Build...** ).</span><span class="sxs-lookup"><span data-stu-id="60749-150">Open the build settings dialog (**Control+Shift+B** or **File > Build Settings...**).</span></span>
    * <span data-ttu-id="60749-151">Sélectionnez **plateforme Windows universelle** puis cliquez sur **plateforme de commutation**.</span><span class="sxs-lookup"><span data-stu-id="60749-151">Select **Universal Windows Platform** then click **Switch Platform**.</span></span>
    * <span data-ttu-id="60749-152">Sélectionnez **Modifier > Paramètres du lecteur**.</span><span class="sxs-lookup"><span data-stu-id="60749-152">Select **Edit>Player Settings**.</span></span>
    * <span data-ttu-id="60749-153">Dans le **inspecteur** panneau sur le côté droit, développez **XR paramètres**.</span><span class="sxs-lookup"><span data-stu-id="60749-153">In the **Inspector** panel on the right hand side, expand **XR Settings**.</span></span>
    * <span data-ttu-id="60749-154">Vérifier le **virtuel pris en charge de réalité** boîte.</span><span class="sxs-lookup"><span data-stu-id="60749-154">Check the **Virtual Reality Supported** box.</span></span>
    * <span data-ttu-id="60749-155">*Réalité mixte Windows doit être le SDK de réalité virtuelle.*</span><span class="sxs-lookup"><span data-stu-id="60749-155">*Windows Mixed Reality should be the Virtual Reality SDK.*</span></span>
* <span data-ttu-id="60749-156">Créer une scène.</span><span class="sxs-lookup"><span data-stu-id="60749-156">Create a scene.</span></span>
    * <span data-ttu-id="60749-157">Dans le **hiérarchie** avec le bouton droit cliquez sur **Main Camera** sélectionnez **supprimer**.</span><span class="sxs-lookup"><span data-stu-id="60749-157">In the **Hierarchy** right click **Main Camera** select **Delete**.</span></span>
    * <span data-ttu-id="60749-158">À partir de **HoloToolkit > entrée > Prefabs** faites glisser **MixedRealityCameraParent** à la **hiérarchie**.</span><span class="sxs-lookup"><span data-stu-id="60749-158">From **HoloToolkit > Input > Prefabs** drag **MixedRealityCameraParent** to the **Hierarchy**.</span></span>
* <span data-ttu-id="60749-159">Ajouter hologrammes à la scène</span><span class="sxs-lookup"><span data-stu-id="60749-159">Add Holograms to the scene</span></span>
    * <span data-ttu-id="60749-160">À partir de **AppPrefabs** faites glisser **Skybox** à la **vue de la scène**.</span><span class="sxs-lookup"><span data-stu-id="60749-160">From **AppPrefabs** drag **Skybox** to the **Scene View**.</span></span>
    * <span data-ttu-id="60749-161">À partir de **AppPrefabs** faites glisser **gestionnaires** à la **hiérarchie**.</span><span class="sxs-lookup"><span data-stu-id="60749-161">From **AppPrefabs** drag **Managers** to the **Hierarchy**.</span></span>
    * <span data-ttu-id="60749-162">À partir de **AppPrefabs** faites glisser **île** à la **hiérarchie**.</span><span class="sxs-lookup"><span data-stu-id="60749-162">From **AppPrefabs** drag **Island** to the **Hierarchy**.</span></span>
* <span data-ttu-id="60749-163">Enregistrez et générez</span><span class="sxs-lookup"><span data-stu-id="60749-163">Save And build</span></span>
    * <span data-ttu-id="60749-164">Enregistrer (soit **contrôle + S** ou **fichier > Enregistrer la scène**)</span><span class="sxs-lookup"><span data-stu-id="60749-164">Save (either **Control+S** or **File > Save Scene**)</span></span>
    * <span data-ttu-id="60749-165">Dans la mesure où il s’agit d’une nouvelle scène, vous devrez nommer.</span><span class="sxs-lookup"><span data-stu-id="60749-165">Since this is a new scene, you'll need to name it.</span></span> <span data-ttu-id="60749-166">Nom n’a pas d’importance, mais nous utilisons SharedMixedReality.</span><span class="sxs-lookup"><span data-stu-id="60749-166">Name doesn't matter, but we use SharedMixedReality.</span></span>
* <span data-ttu-id="60749-167">Exporter vers Visual Studio</span><span class="sxs-lookup"><span data-stu-id="60749-167">Export To Visual Studio</span></span>
    * <span data-ttu-id="60749-168">Ouvrez le menu build (**CTRL + MAJ + B** ou **fichier > Paramètres de Build**)</span><span class="sxs-lookup"><span data-stu-id="60749-168">Open the build menu (**Control+Shift+B** or **File > Build Settings**)</span></span>
    * <span data-ttu-id="60749-169">Cliquez sur **ajouter des scènes ouverts.**</span><span class="sxs-lookup"><span data-stu-id="60749-169">Click **Add Open Scenes.**</span></span>
    * <span data-ttu-id="60749-170">Vérifiez **Unity C# projets**</span><span class="sxs-lookup"><span data-stu-id="60749-170">Check **Unity C# Projects**</span></span>
    * <span data-ttu-id="60749-171">Cliquez sur **Build**.</span><span class="sxs-lookup"><span data-stu-id="60749-171">Click **Build**.</span></span>
    * <span data-ttu-id="60749-172">Dans la fenêtre Explorateur de fichiers qui s’affiche, créez un dossier nommé **application**.</span><span class="sxs-lookup"><span data-stu-id="60749-172">In the file explorer window that appears, create a New Folder named **App**.</span></span>
    * <span data-ttu-id="60749-173">Clic le **application** dossier.</span><span class="sxs-lookup"><span data-stu-id="60749-173">Single click the **App** folder.</span></span>
    * <span data-ttu-id="60749-174">Appuyez sur **sélectionnez dossier.**</span><span class="sxs-lookup"><span data-stu-id="60749-174">Press **Select Folder.**</span></span>
    * <span data-ttu-id="60749-175">**Attendez que la génération soit terminée**</span><span class="sxs-lookup"><span data-stu-id="60749-175">**Wait for the build to complete**</span></span>
    * <span data-ttu-id="60749-176">Dans la fenêtre Explorateur de fichiers qui s’affiche, accédez à la **application** dossier.</span><span class="sxs-lookup"><span data-stu-id="60749-176">In the file explorer window that appears, navigate into the **App** folder.</span></span>
    * <span data-ttu-id="60749-177">Double-cliquez sur **SharedMixedReality.sln** pour lancer Visual Studio</span><span class="sxs-lookup"><span data-stu-id="60749-177">Double-click **SharedMixedReality.sln** to launch Visual Studio</span></span>
* <span data-ttu-id="60749-178">Construire à partir de Visual Studio</span><span class="sxs-lookup"><span data-stu-id="60749-178">Build From Visual Studio</span></span>
    * <span data-ttu-id="60749-179">À l’aide de la barre d’outils supérieure de modifier la cible à **version** et **x86**.</span><span class="sxs-lookup"><span data-stu-id="60749-179">Using the top toolbar change target to **Release** and **x86**.</span></span>
    * <span data-ttu-id="60749-180">Cliquez sur la flèche en regard **ordinateur Local** et sélectionnez **appareil** à déployer sur HoloLens</span><span class="sxs-lookup"><span data-stu-id="60749-180">Click the arrow next to **Local Machine** and select **Device** to deploy to HoloLens</span></span>
    * <span data-ttu-id="60749-181">Cliquez sur la flèche en regard **appareil** et sélectionnez **ordinateur Local** à déployer pour le casque de réalité mixte.</span><span class="sxs-lookup"><span data-stu-id="60749-181">Click the arrow next to **Device** and select **Local Machine** to deploy for the mixed reality headset.</span></span>
    * <span data-ttu-id="60749-182">Cliquez sur **Déboguer -> Démarrer sans débogage** ou **CTRL + F5** pour démarrer l’application.</span><span class="sxs-lookup"><span data-stu-id="60749-182">Click **Debug->Start Without Debugging** or **Control+F5** to start the application.</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="60749-183">Analyser le code</span><span class="sxs-lookup"><span data-stu-id="60749-183">Digging into the code</span></span>

<span data-ttu-id="60749-184">Dans le panneau de configuration de projet, accédez à **Assets\HoloToolkit\Input\Scripts\Utilities** et double-cliquez sur **MixedRealityCameraManager.cs** pour l’ouvrir.</span><span class="sxs-lookup"><span data-stu-id="60749-184">In the project panel, navigate to **Assets\HoloToolkit\Input\Scripts\Utilities** and double click **MixedRealityCameraManager.cs** to open it.</span></span>

<span data-ttu-id="60749-185">**Vue d’ensemble :** MixedRealityCameraManager.cs est un script simple qui ajuste les paramètres de qualité niveau et d’arrière-plan en fonction de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="60749-185">**Overview:** MixedRealityCameraManager.cs is a simple script that adjusts quality level and background settings based on the device.</span></span> <span data-ttu-id="60749-186">Clé ici est HolographicSettings.IsDisplayOpaque, ce qui permet un script pour détecter si l’appareil est un HoloLens (IsDisplayOpaque retourne la valeur false) ou un casque immersif (IsDisplayOpaque retourne la valeur true).</span><span class="sxs-lookup"><span data-stu-id="60749-186">Key here is HolographicSettings.IsDisplayOpaque, which allows a script to detect if the device is a HoloLens (IsDisplayOpaque returns false) or an immersive headset (IsDisplayOpaque returns true).</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="60749-187">Profitez de votre progression</span><span class="sxs-lookup"><span data-stu-id="60749-187">Enjoy your progress</span></span>

<span data-ttu-id="60749-188">À ce stade, l’application sera restituez simplement un hologramme.</span><span class="sxs-lookup"><span data-stu-id="60749-188">At this point the application will just render a hologram.</span></span> <span data-ttu-id="60749-189">Nous allons ajouter interaction à l’hologramme ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="60749-189">We will add interaction to the hologram later.</span></span> <span data-ttu-id="60749-190">Les deux périphériques restitue l’hologramme les mêmes.</span><span class="sxs-lookup"><span data-stu-id="60749-190">Both devices will render the hologram the same.</span></span> <span data-ttu-id="60749-191">Le casque immersif affiche également un arrière-plan bleu ciel et des nuages.</span><span class="sxs-lookup"><span data-stu-id="60749-191">The immersive headset will also render a blue sky and clouds background.</span></span>

## <a name="chapter-2---interaction"></a><span data-ttu-id="60749-192">Chapitre 2 - Interaction</span><span class="sxs-lookup"><span data-stu-id="60749-192">Chapter 2 - Interaction</span></span>

>[!VIDEO https://www.youtube.com/embed/Lrb1y4sQRvI]

### <a name="objectives"></a><span data-ttu-id="60749-193">Objectifs</span><span class="sxs-lookup"><span data-stu-id="60749-193">Objectives</span></span>

<span data-ttu-id="60749-194">Montrer comment gérer l’entrée pour une application Windows Mixed Reality.</span><span class="sxs-lookup"><span data-stu-id="60749-194">Show how to handle input for a Windows Mixed Reality application.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="60749-195">Nous allons créer</span><span class="sxs-lookup"><span data-stu-id="60749-195">What we will build</span></span>

<span data-ttu-id="60749-196">S’appuyant sur l’application à partir de chapitre 1, nous allons ajouter des fonctionnalités permettant de l’utilisateur de capter l’hologramme et placez-le sur une surface du monde réel dans HoloLens ou sur une table virtuelle dans un casque immersive.</span><span class="sxs-lookup"><span data-stu-id="60749-196">Building on the application from chapter 1, we will add functionality to allow the user to pick up the hologram and place it on a real world surface in HoloLens or on a virtual table in an immersive headset.</span></span>

<span data-ttu-id="60749-197">**Actualisateur d’entrée :** Sur HoloLens le mouvement select est la **appui en l’air**.</span><span class="sxs-lookup"><span data-stu-id="60749-197">**Input Refresher:** On HoloLens the select gesture is the **air tap**.</span></span> <span data-ttu-id="60749-198">Sur des casques IMMERSIFS, nous allons utiliser le **A** bouton sur le contrôleur de la Xbox.</span><span class="sxs-lookup"><span data-stu-id="60749-198">On immersive headsets, we will use the **A** button on the Xbox controller.</span></span> <span data-ttu-id="60749-199">Pour plus d’informations sur l’entrée [Démarrer ici](gestures.md).</span><span class="sxs-lookup"><span data-stu-id="60749-199">For more information on input [start here](gestures.md).</span></span>

### <a name="steps"></a><span data-ttu-id="60749-200">Étapes</span><span class="sxs-lookup"><span data-stu-id="60749-200">Steps</span></span>
* <span data-ttu-id="60749-201">Ajouter le Gestionnaire d’entrée</span><span class="sxs-lookup"><span data-stu-id="60749-201">Add Input manager</span></span>
    * <span data-ttu-id="60749-202">À partir de **HoloToolkit > entrée > Prefabs** faites glisser **InputManager** à **hiérarchie** en tant qu’enfant de **gestionnaires**.</span><span class="sxs-lookup"><span data-stu-id="60749-202">From **HoloToolkit > Input > Prefabs** drag **InputManager** to **Hierarchy** as a child of **Managers**.</span></span>
    * <span data-ttu-id="60749-203">À partir de **HoloToolkit > entrée > Prefabs > curseur** faites glisser **curseur** à **hiérarchie**.</span><span class="sxs-lookup"><span data-stu-id="60749-203">From **HoloToolkit > Input > Prefabs > Cursor** drag **Cursor** to **Hierarchy**.</span></span>
* <span data-ttu-id="60749-204">Ajouter un mappage Spatial</span><span class="sxs-lookup"><span data-stu-id="60749-204">Add Spatial Mapping</span></span>
    * <span data-ttu-id="60749-205">À partir de **HoloToolkit > SpatialMapping > Prefabs** faites glisser **SpatialMapping** à **hiérarchie**.</span><span class="sxs-lookup"><span data-stu-id="60749-205">From **HoloToolkit > SpatialMapping > Prefabs** drag **SpatialMapping** to **Hierarchy**.</span></span>
* <span data-ttu-id="60749-206">Ajouter Playspace virtuel</span><span class="sxs-lookup"><span data-stu-id="60749-206">Add Virtual Playspace</span></span>
    * <span data-ttu-id="60749-207">Dans **hiérarchie** développez **MixedRealityCameraParent** sélectionnez **limite**</span><span class="sxs-lookup"><span data-stu-id="60749-207">In **Hierarchy** expand **MixedRealityCameraParent** select **Boundary**</span></span>
    * <span data-ttu-id="60749-208">Dans **inspecteur** panneau Cochez la case pour activer **limite**</span><span class="sxs-lookup"><span data-stu-id="60749-208">In **Inspector** panel check the box to enable **Boundary**</span></span>
    * <span data-ttu-id="60749-209">À partir de **AppPrefabs** faites glisser **VRRoom** à **hiérarchie**.</span><span class="sxs-lookup"><span data-stu-id="60749-209">From **AppPrefabs** drag **VRRoom** to **Hierarchy**.</span></span>
* <span data-ttu-id="60749-210">Ajouter WorldAnchorManager</span><span class="sxs-lookup"><span data-stu-id="60749-210">Add WorldAnchorManager</span></span>
    * <span data-ttu-id="60749-211">Dans **hiérarchie**, sélectionnez **gestionnaires**.</span><span class="sxs-lookup"><span data-stu-id="60749-211">In **Hierarchy**, Select **Managers**.</span></span>
    * <span data-ttu-id="60749-212">Dans **inspecteur**, cliquez sur **ajouter un composant**.</span><span class="sxs-lookup"><span data-stu-id="60749-212">In **Inspector**, click **Add Component**.</span></span>
    * <span data-ttu-id="60749-213">Type **World d’ancrage Manager**.</span><span class="sxs-lookup"><span data-stu-id="60749-213">Type **World Anchor Manager**.</span></span>
    * <span data-ttu-id="60749-214">Sélectionnez **World d’ancrage Manager** pour l’ajouter.</span><span class="sxs-lookup"><span data-stu-id="60749-214">Select **World Anchor Manager** to add it.</span></span>
* <span data-ttu-id="60749-215">Ajouter TapToPlace à l’île</span><span class="sxs-lookup"><span data-stu-id="60749-215">Add TapToPlace to the Island</span></span>
    * <span data-ttu-id="60749-216">Dans **hiérarchie**, développez **île**.</span><span class="sxs-lookup"><span data-stu-id="60749-216">In **Hierarchy**, expand **Island**.</span></span>
    * <span data-ttu-id="60749-217">Sélectionnez **MixedRealityLand**.</span><span class="sxs-lookup"><span data-stu-id="60749-217">Select **MixedRealityLand**.</span></span>
    * <span data-ttu-id="60749-218">Dans **inspecteur**, cliquez sur **ajouter un composant**.</span><span class="sxs-lookup"><span data-stu-id="60749-218">In **Inspector**, click **Add Component**.</span></span>
    * <span data-ttu-id="60749-219">Type **appuyez sur la Place** et sélectionnez-le.</span><span class="sxs-lookup"><span data-stu-id="60749-219">Type **Tap To Place** and select it.</span></span>
    * <span data-ttu-id="60749-220">Vérifiez **placer Parent sur Tap**.</span><span class="sxs-lookup"><span data-stu-id="60749-220">Check **Place Parent On Tap**.</span></span>
    * <span data-ttu-id="60749-221">Définissez **décalage de la sélection élective** à **(0, 0.1, 0)**.</span><span class="sxs-lookup"><span data-stu-id="60749-221">Set **Placement Offset** to **(0, 0.1, 0)**.</span></span>
* <span data-ttu-id="60749-222">Enregistrez et générez comme auparavant</span><span class="sxs-lookup"><span data-stu-id="60749-222">Save and Build as before</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="60749-223">Analyser le code</span><span class="sxs-lookup"><span data-stu-id="60749-223">Digging into the code</span></span>

<span data-ttu-id="60749-224">**Script 1 - GamepadInput.cs**</span><span class="sxs-lookup"><span data-stu-id="60749-224">**Script 1 - GamepadInput.cs**</span></span>

<span data-ttu-id="60749-225">Dans le panneau de configuration de projet, accédez à **Assets\HoloToolkit\Input\Scripts\InputSources** et double-cliquez sur **GamepadInput.cs** pour l’ouvrir.</span><span class="sxs-lookup"><span data-stu-id="60749-225">In the project panel navigate to **Assets\HoloToolkit\Input\Scripts\InputSources** and double click **GamepadInput.cs** to open it.</span></span> <span data-ttu-id="60749-226">Dans le même chemin d’accès dans le panneau de configuration de projet, également double-cliquez sur **InteractionSourceInputSource.cs**.</span><span class="sxs-lookup"><span data-stu-id="60749-226">From the same path in the project panel, also double click **InteractionSourceInputSource.cs**.</span></span>

<span data-ttu-id="60749-227">Notez que les deux scripts ont une classe de base commune, BaseInputSource.</span><span class="sxs-lookup"><span data-stu-id="60749-227">Note that both scripts have a common base class, BaseInputSource.</span></span>

<span data-ttu-id="60749-228">BaseInputSource conserve une référence à un InputManager, ce qui permet à un script pour déclencher des événements.</span><span class="sxs-lookup"><span data-stu-id="60749-228">BaseInputSource keeps a reference to an InputManager, which allows a script to trigger events.</span></span> <span data-ttu-id="60749-229">Dans ce cas, l’événement InputClicked est pertinente.</span><span class="sxs-lookup"><span data-stu-id="60749-229">In this case, the InputClicked event is relevant.</span></span> <span data-ttu-id="60749-230">Cela sera important de se rappeler lorsque nous aborderons le script 2, TapToPlace.</span><span class="sxs-lookup"><span data-stu-id="60749-230">This will be important to remember when we get to script 2, TapToPlace.</span></span> <span data-ttu-id="60749-231">Dans le cas GamePadInput, nous interroger pour le bouton A sur le contrôleur à enfoncer, puis nous déclencher l’événement InputClicked.</span><span class="sxs-lookup"><span data-stu-id="60749-231">In the case of GamePadInput, we poll for the A button on the controller to be pressed, then we raise the InputClicked event.</span></span> <span data-ttu-id="60749-232">Dans le cas InteractionSourceInputSource, nous déclencher l’événement InputClicked en réponse à la TappedEvent.</span><span class="sxs-lookup"><span data-stu-id="60749-232">In the case of InteractionSourceInputSource, we raise the InputClicked event in response to the TappedEvent.</span></span>

<span data-ttu-id="60749-233">**Script 2 - TapToPlace.cs**</span><span class="sxs-lookup"><span data-stu-id="60749-233">**Script 2 - TapToPlace.cs**</span></span>

<span data-ttu-id="60749-234">Dans le panneau de configuration de projet, accédez à **Assets\HoloToolkit\SpatialMapping\Scripts** et double-cliquez sur **TapToPlace.cs** pour l’ouvrir.</span><span class="sxs-lookup"><span data-stu-id="60749-234">In the project panel navigate to **Assets\HoloToolkit\SpatialMapping\Scripts** and double click **TapToPlace.cs** to open it.</span></span>

<span data-ttu-id="60749-235">La première chose que de nombreux développeurs souhaitent implémenter lors de la création d’une application HOLOGRAPHIQUE bouge hologrammes avec l’entrée de mouvement.</span><span class="sxs-lookup"><span data-stu-id="60749-235">The first thing many developers want to implement when creating a Holographic application is moving Holograms with gesture input.</span></span> <span data-ttu-id="60749-236">Par conséquent, nous avons s’efforce de commenter soigneusement ce script.</span><span class="sxs-lookup"><span data-stu-id="60749-236">As such, we've endeavored to thoroughly comment this script.</span></span> <span data-ttu-id="60749-237">Quelques éléments méritent d’être mise en surbrillance pour ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="60749-237">A few things are worth highlighting for this tutorial.</span></span>

<span data-ttu-id="60749-238">Tout d’abord, notez que TapToPlace implémente IInputClickHandler.</span><span class="sxs-lookup"><span data-stu-id="60749-238">First, note that TapToPlace implements IInputClickHandler.</span></span> <span data-ttu-id="60749-239">IInputClickHandler expose les fonctions qui gèrent l’événement InputClicked déclenché par GamePadInput.cs ou InteractionSourceInputSource.cs.</span><span class="sxs-lookup"><span data-stu-id="60749-239">IInputClickHandler exposes the functions that handle the InputClicked event raised by GamePadInput.cs or InteractionSourceInputSource.cs.</span></span> <span data-ttu-id="60749-240">OnInputClicked est appelée quand un BaseInputSource détecte un clic pendant que l’objet avec TapToPlace est en focus.</span><span class="sxs-lookup"><span data-stu-id="60749-240">OnInputClicked is called when a BaseInputSource detects a click while the object with TapToPlace is in focus.</span></span> <span data-ttu-id="60749-241">Airtapping sur HoloLens ou en appuyant sur le bouton A sur le contrôleur Xbox déclenche l’événement.</span><span class="sxs-lookup"><span data-stu-id="60749-241">Either airtapping on HoloLens or pressing the A button on the Xbox controller will trigger the event.</span></span>

<span data-ttu-id="60749-242">Est ensuite le code exécuté dans la mise à jour pour voir si une surface est regardée donc nous pouvons placer l’objet de jeu sur une surface, telles qu’une table.</span><span class="sxs-lookup"><span data-stu-id="60749-242">Second is the code be executed in update to see if a surface is being looked at so we can place the game object on a surface, like a table.</span></span> <span data-ttu-id="60749-243">Le casque immersif n’a pas un concept de surfaces réels, par conséquent, l’objet qui représente le haut de la table (Vroom > TableThingy > Cube) a été marqué avec la couche physique SpatialMapping, donc le rayon utilisé pour effectuer un cast de la mise à jour va entrer en conflit avec le haut de la table virtuelle.</span><span class="sxs-lookup"><span data-stu-id="60749-243">The immersive headset doesn't have a concept of real surfaces, so the object that represents the table top (Vroom > TableThingy > Cube) has been marked with the SpatialMapping physics layer, so the ray cast in Update will collide with the virtual table top.</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="60749-244">Profitez de votre progression</span><span class="sxs-lookup"><span data-stu-id="60749-244">Enjoy your progress</span></span>

<span data-ttu-id="60749-245">Cette fois, vous pouvez sélectionner l’îlot de le déplacer.</span><span class="sxs-lookup"><span data-stu-id="60749-245">This time you can select the island to move it.</span></span> <span data-ttu-id="60749-246">Sur HoloLens, vous pouvez déplacer l’île à une surface réelle.</span><span class="sxs-lookup"><span data-stu-id="60749-246">On HoloLens you can move the island to a real surface.</span></span> <span data-ttu-id="60749-247">Dans le casque immersif, vous pouvez déplacer l’île à la table virtuelle que nous avons ajouté.</span><span class="sxs-lookup"><span data-stu-id="60749-247">In the immersive headset you can move the island to the virtual table we added.</span></span>

## <a name="chapter-3---sharing"></a><span data-ttu-id="60749-248">Chapitre 3 - partage</span><span class="sxs-lookup"><span data-stu-id="60749-248">Chapter 3 - Sharing</span></span>

>[!VIDEO https://www.youtube.com/embed/1diycJvxfDc]

### <a name="objectives"></a><span data-ttu-id="60749-249">Objectifs</span><span class="sxs-lookup"><span data-stu-id="60749-249">Objectives</span></span>

<span data-ttu-id="60749-250">Assurez-vous que le réseau est correctement configuré et décrit en détail comment les ancres spatiales sont partagés entre les appareils.</span><span class="sxs-lookup"><span data-stu-id="60749-250">Ensure that the network is correctly configured and detail how spatial anchors are shared between devices.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="60749-251">Nous allons créer</span><span class="sxs-lookup"><span data-stu-id="60749-251">What we will build</span></span>

<span data-ttu-id="60749-252">Nous convertira notre projet à un projet multijoueur.</span><span class="sxs-lookup"><span data-stu-id="60749-252">We will convert our project to a multiplayer project.</span></span> <span data-ttu-id="60749-253">Nous allons ajouter l’interface utilisateur et la logique aux sessions d’hôte ou de jointure.</span><span class="sxs-lookup"><span data-stu-id="60749-253">We will add UI and logic to host or join sessions.</span></span> <span data-ttu-id="60749-254">HoloLens les utilisateurs voient l’autre dans la session avec les clouds aux supérieurs et les utilisateurs casque IMMERSIFS ont des nuages proches où le point d’ancrage est.</span><span class="sxs-lookup"><span data-stu-id="60749-254">HoloLens users will see each other in the session with clouds over their heads, and immersive headset users have clouds near to where the anchor is.</span></span> <span data-ttu-id="60749-255">Utilisateurs des casques IMMERSIFS voient les utilisateurs HoloLens relatif à l’origine de la scène.</span><span class="sxs-lookup"><span data-stu-id="60749-255">Users in the immersive headsets will see the HoloLens users relative to the origin of the scene.</span></span> <span data-ttu-id="60749-256">Les utilisateurs HoloLens voient toutes le hologramme de l’île au même endroit.</span><span class="sxs-lookup"><span data-stu-id="60749-256">HoloLens users will all see the hologram of the island in the same place.</span></span> <span data-ttu-id="60749-257">Il est essentiel de noter que les utilisateurs dans des casques IMMERSIFS ne sera pas sur l’île au cours de ce chapitre, mais seront comporte de manière très similaire pour HoloLens, avec une vue d’ensemble de l’île oiseaux.</span><span class="sxs-lookup"><span data-stu-id="60749-257">It is key to note that the users in the immersive headsets will not be on the island during this chapter, but will behave very similarly to HoloLens, with a birds eye view of the island.</span></span>

### <a name="steps"></a><span data-ttu-id="60749-258">Étapes</span><span class="sxs-lookup"><span data-stu-id="60749-258">Steps</span></span>
* <span data-ttu-id="60749-259">Île de suppression et VRRoom</span><span class="sxs-lookup"><span data-stu-id="60749-259">Remove Island and VRRoom</span></span>
    * <span data-ttu-id="60749-260">Dans **hiérarchie** avec le bouton droit **île** sélectionnez **supprimer**</span><span class="sxs-lookup"><span data-stu-id="60749-260">In **Hierarchy** right-click **Island** select **Delete**</span></span>
    * <span data-ttu-id="60749-261">Dans **hiérarchie** avec le bouton droit **VRRoom** sélectionnez **supprimer**</span><span class="sxs-lookup"><span data-stu-id="60749-261">In **Hierarchy** right-click **VRRoom** select **Delete**</span></span>
* <span data-ttu-id="60749-262">Ajouter Usland</span><span class="sxs-lookup"><span data-stu-id="60749-262">Add Usland</span></span>
    * <span data-ttu-id="60749-263">À partir de **AppPrefabs** faites glisser **Usland** à **hiérarchie**.</span><span class="sxs-lookup"><span data-stu-id="60749-263">From **AppPrefabs** drag **Usland** to **Hierarchy**.</span></span>
* <span data-ttu-id="60749-264">À partir de **AppPrefabs** faites glisser chacune de ces éléments **hiérarchie**:</span><span class="sxs-lookup"><span data-stu-id="60749-264">From **AppPrefabs** drag each of the following to **Hierarchy**:</span></span>
    * <span data-ttu-id="60749-265">**UNETSharingStage**</span><span class="sxs-lookup"><span data-stu-id="60749-265">**UNETSharingStage**</span></span>
    * <span data-ttu-id="60749-266">**UNetAnchorRoot**</span><span class="sxs-lookup"><span data-stu-id="60749-266">**UNetAnchorRoot**</span></span>
    * <span data-ttu-id="60749-267">**UIContainer**</span><span class="sxs-lookup"><span data-stu-id="60749-267">**UIContainer**</span></span>
    * <span data-ttu-id="60749-268">**DebugPanelButton**</span><span class="sxs-lookup"><span data-stu-id="60749-268">**DebugPanelButton**</span></span>
* <span data-ttu-id="60749-269">Enregistrez et générez comme auparavant</span><span class="sxs-lookup"><span data-stu-id="60749-269">Save and Build as before</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="60749-270">Analyser le code</span><span class="sxs-lookup"><span data-stu-id="60749-270">Digging into the code</span></span>

<span data-ttu-id="60749-271">Dans le panneau de configuration de projet, accédez à **Assets\AppPrefabs\Support\SharingWithUnet\Scripts** et double-cliquez sur **UnetAnchorManager.cs**.</span><span class="sxs-lookup"><span data-stu-id="60749-271">In the project panel, navigate to **Assets\AppPrefabs\Support\SharingWithUnet\Scripts** and double-click on **UnetAnchorManager.cs**.</span></span> <span data-ttu-id="60749-272">La possibilité pour un HoloLens partager des informations de suivi avec un autre HoloLens telles que les deux périphériques peuvent partager le même espace est proche de magique.</span><span class="sxs-lookup"><span data-stu-id="60749-272">The ability for one HoloLens to share tracking information with another HoloLens such that both devices can share the same space is near magical.</span></span> <span data-ttu-id="60749-273">La puissance de réalité mixte est active lorsque deux ou plusieurs personnes peuvent collaborer à l’aide des mêmes données numériques.</span><span class="sxs-lookup"><span data-stu-id="60749-273">The power of mixed reality comes alive when two or more people can collaborate using the same digital data.</span></span>

<span data-ttu-id="60749-274">Quelques points à souligner dans ce script :</span><span class="sxs-lookup"><span data-stu-id="60749-274">A few things to point out in this script:</span></span>

<span data-ttu-id="60749-275">Dans la fonction start, notez la vérification de **IsDisplayOpaque**.</span><span class="sxs-lookup"><span data-stu-id="60749-275">In the start function, notice the check for **IsDisplayOpaque**.</span></span> <span data-ttu-id="60749-276">Dans ce cas, nous supposons que le point d’ancrage est établie.</span><span class="sxs-lookup"><span data-stu-id="60749-276">In this case, we pretend that the Anchor is established.</span></span> <span data-ttu-id="60749-277">Il s’agit, car des casques IMMERSIFS n’exposent pas d’un moyen pour importer ou exporter des points d’ancrage.</span><span class="sxs-lookup"><span data-stu-id="60749-277">This is because the immersive headsets do not expose a way to import or export anchors.</span></span> <span data-ttu-id="60749-278">Si nous exécutons sur un HoloLens, toutefois, ce script implémente ancres partage entre les appareils.</span><span class="sxs-lookup"><span data-stu-id="60749-278">If we are running on a HoloLens, however, this script implements sharing anchors between the devices.</span></span> <span data-ttu-id="60749-279">L’appareil qui démarre la session créera un point d’ancrage pour l’exportation.</span><span class="sxs-lookup"><span data-stu-id="60749-279">The device that starts the session will create an anchor for exporting.</span></span> <span data-ttu-id="60749-280">L’appareil qui rejoint une session demande l’ancre de l’appareil qui a démarré la session.</span><span class="sxs-lookup"><span data-stu-id="60749-280">The device that joins a session will request the anchor from the device that started the session.</span></span>

<span data-ttu-id="60749-281">**Exportation :**</span><span class="sxs-lookup"><span data-stu-id="60749-281">**Exporting:**</span></span>

<span data-ttu-id="60749-282">Lorsqu’un utilisateur crée une session, NetworkDiscoveryWithAnchors appellera UNETAnchorManagers CreateAnchor (fonction).</span><span class="sxs-lookup"><span data-stu-id="60749-282">When a user creates a session, NetworkDiscoveryWithAnchors will call UNETAnchorManagers CreateAnchor function.</span></span> <span data-ttu-id="60749-283">Nous allons suivre CreateAnchor flux.</span><span class="sxs-lookup"><span data-stu-id="60749-283">Let's follow CreateAnchor flow.</span></span>

<span data-ttu-id="60749-284">Nous allons commencer par effectuer certaines tâches de nettoyage, effacement de toutes les données que nous pouvons avoir collectées pour les points d’ancrage précédents.</span><span class="sxs-lookup"><span data-stu-id="60749-284">We start by doing some housekeeping, clearing out any data we may have collected for previous anchors.</span></span> <span data-ttu-id="60749-285">Puis nous vérifier s’il existe un point d’ancrage mis en cache à charger.</span><span class="sxs-lookup"><span data-stu-id="60749-285">Then we check if there is a cached anchor to load.</span></span> <span data-ttu-id="60749-286">Les données d’ancrage a tendance à être comprise entre 5 et 20 Mo, afin de réutiliser les ancres mis en cache peut enregistrer sur la quantité de données, vous devez donc transférer sur le réseau.</span><span class="sxs-lookup"><span data-stu-id="60749-286">The anchor data tends to be between 5 and 20 MB, so reusing cached anchors can save on the amount of data we need to transfer over the network.</span></span> <span data-ttu-id="60749-287">Nous allons voir comment cela fonctionne un peu plus tard.</span><span class="sxs-lookup"><span data-stu-id="60749-287">We'll see how this works a bit later.</span></span> <span data-ttu-id="60749-288">Même si nous réutilisons le point d’ancrage, nous devons obtenir le point d’ancrage données prêtes en cas d’un nouveau client joint qui n’ont pas le point d’ancrage.</span><span class="sxs-lookup"><span data-stu-id="60749-288">Even if we are reusing the anchor, we need to get the anchor data ready in case a new client joins that doesn't have the anchor.</span></span>

<span data-ttu-id="60749-289">À propos de préparer les données d’ancrage, la classe WorldAnchorTransferBatch expose la fonctionnalité permettant de préparer les données d’ancrage pour envoyer à un autre appareil ou application et les fonctionnalités pour importer les données de point d’ancrage.</span><span class="sxs-lookup"><span data-stu-id="60749-289">Speaking of getting the anchor data ready, the WorldAnchorTransferBatch class exposes the functionality to prepare anchor data for sending to another device or application and the functionality to import the anchor data.</span></span> <span data-ttu-id="60749-290">Étant donné que nous sommes sur le chemin d’exportation, nous ajouter notre point d’ancrage à la WorldAnchorTransferBatch et appeler la fonction ExportAsync.</span><span class="sxs-lookup"><span data-stu-id="60749-290">Since we're on the export path, we will add our anchor to the WorldAnchorTransferBatch and call the ExportAsync function.</span></span> <span data-ttu-id="60749-291">ExportAsync appelle ensuite le rappel WriteBuffer qu’il génère des données pour l’exportation.</span><span class="sxs-lookup"><span data-stu-id="60749-291">ExportAsync will then call the WriteBuffer callback as it generates data for export.</span></span> <span data-ttu-id="60749-292">Lorsque toutes les données ont été exportées ExportComplete est appelée.</span><span class="sxs-lookup"><span data-stu-id="60749-292">When all of the data has been exported ExportComplete will be called.</span></span> <span data-ttu-id="60749-293">Dans WriteBuffer, nous ajoutons le segment de données à une liste, que nous conservons pour l’exportation.</span><span class="sxs-lookup"><span data-stu-id="60749-293">In WriteBuffer we add the chunk of data to a list we keep for exporting.</span></span> <span data-ttu-id="60749-294">Dans ExportComplete nous convertir la liste vers un tableau.</span><span class="sxs-lookup"><span data-stu-id="60749-294">In ExportComplete we convert the list to an array.</span></span> <span data-ttu-id="60749-295">La variable AnchorName est également définie, ce qui déclenchera autres appareils pour demander le point d’ancrage si elles ne l’avez pas.</span><span class="sxs-lookup"><span data-stu-id="60749-295">The AnchorName variable is also set, which will trigger other devices to request the anchor if they don't have it.</span></span>

<span data-ttu-id="60749-296">Dans certains cas, le point d’ancrage n’exporter ou créera petite quantité de données qui nous essaierons à nouveau.</span><span class="sxs-lookup"><span data-stu-id="60749-296">In some cases the anchor won't export or will create so little data that we will try again.</span></span> <span data-ttu-id="60749-297">Ici nous suffit d’appeler CreateAnchor à nouveau.</span><span class="sxs-lookup"><span data-stu-id="60749-297">Here we just call CreateAnchor again.</span></span>

<span data-ttu-id="60749-298">Une fonction finale dans le chemin d’exportation est AnchorFoundRemotely.</span><span class="sxs-lookup"><span data-stu-id="60749-298">A final function in the export path is AnchorFoundRemotely.</span></span> <span data-ttu-id="60749-299">Lorsqu’un autre appareil détecte le point d’ancrage, cet appareil indiquera l’hôte et l’hôte qui utilisera comme un signal indiquant que le point d’ancrage est une « ancre bon » et peut être mis en cache.</span><span class="sxs-lookup"><span data-stu-id="60749-299">When another device finds the anchor, that device will tell the host, and the host will use that as a signal that the anchor is a "good anchor" and can be cached.</span></span>

<span data-ttu-id="60749-300">**L’importation :**</span><span class="sxs-lookup"><span data-stu-id="60749-300">**Importing:**</span></span>

<span data-ttu-id="60749-301">Lorsqu’un HoloLens rejoint une session, il doit importer un point d’ancrage.</span><span class="sxs-lookup"><span data-stu-id="60749-301">When a HoloLens joins a session, it needs to import an anchor.</span></span> <span data-ttu-id="60749-302">Dans la fonction de mise à jour de UNETAnchorManager, le AnchorName est interrogé.</span><span class="sxs-lookup"><span data-stu-id="60749-302">In UNETAnchorManager's Update function, the AnchorName is polled.</span></span> <span data-ttu-id="60749-303">Lorsque le nom de point d’ancrage change, le processus d’importation commence.</span><span class="sxs-lookup"><span data-stu-id="60749-303">When the anchor name changes, the import process begins.</span></span> <span data-ttu-id="60749-304">Tout d’abord, nous essayons de charger le point d’ancrage portant le nom spécifié à partir du magasin local de point d’ancrage.</span><span class="sxs-lookup"><span data-stu-id="60749-304">First, we try to load the anchor with the specified name from the local anchor store.</span></span> <span data-ttu-id="60749-305">Si nous avons déjà cela, nous pouvons l’utiliser sans avoir à télécharger les données à nouveau.</span><span class="sxs-lookup"><span data-stu-id="60749-305">If we already have it, we can use it without downloading the data again.</span></span> <span data-ttu-id="60749-306">Si nous ne l’avez pas, nous appelons la WaitForAnchor qui lance le téléchargement.</span><span class="sxs-lookup"><span data-stu-id="60749-306">If we don't have it, then we call WaitForAnchor which will initiate the download.</span></span>

<span data-ttu-id="60749-307">Lorsque le téléchargement est terminé, NetworkTransmitter_dataReadyEvent est appelée.</span><span class="sxs-lookup"><span data-stu-id="60749-307">When the download is completed, NetworkTransmitter_dataReadyEvent is called.</span></span> <span data-ttu-id="60749-308">Il signale la boucle de mise à jour pour appeler ImportAsync avec les données téléchargées.</span><span class="sxs-lookup"><span data-stu-id="60749-308">This will signal the Update loop to call ImportAsync with the downloaded data.</span></span> <span data-ttu-id="60749-309">ImportAsync appellera ImportComplete lorsque le processus d’importation est terminé.</span><span class="sxs-lookup"><span data-stu-id="60749-309">ImportAsync will call ImportComplete when the import process is complete.</span></span> <span data-ttu-id="60749-310">Si l’importation a réussi, le point d’ancrage sera enregistré dans le magasin de lecteur local.</span><span class="sxs-lookup"><span data-stu-id="60749-310">If the import is successful, the anchor will be saved in the local player store.</span></span> <span data-ttu-id="60749-311">PlayerController.cs effectue l’appel à AnchorFoundRemotely pour informer l’hôte qu’un bon point d’ancrage a été établie.</span><span class="sxs-lookup"><span data-stu-id="60749-311">PlayerController.cs actually makes the call to AnchorFoundRemotely to let the host know that a good anchor has been established.</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="60749-312">Profitez de votre progression</span><span class="sxs-lookup"><span data-stu-id="60749-312">Enjoy your progress</span></span>

<span data-ttu-id="60749-313">Cette fois un utilisateur avec un HoloLens hébergera une session à l’aide de la **démarrer la session** bouton dans l’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="60749-313">This time a user with a HoloLens will host a session using the **start session** button in the UI.</span></span> <span data-ttu-id="60749-314">Les autres utilisateurs, à la fois sur HoloLens ou un casque immersif, seront sélectionnez la session, puis le **rejoindre session** bouton dans l’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="60749-314">Other users, both on HoloLens or an immersive headset, will select the session and then select the **join session** button in the UI.</span></span> <span data-ttu-id="60749-315">Si vous avez plusieurs personnes avec des appareils HoloLens, ils bénéficieront des clouds rouge sur leurs têtes.</span><span class="sxs-lookup"><span data-stu-id="60749-315">If you have multiple people with HoloLens devices, they will have red clouds over their heads.</span></span> <span data-ttu-id="60749-316">Il y aura également un cloud bleu pour chaque casque immersif, mais les clouds bleu ne sera pas ci-dessus les casques, comme les casques n’essayant pas à trouver le même espace de coordonnées de monde en tant que les appareils HoloLens.</span><span class="sxs-lookup"><span data-stu-id="60749-316">There will also be a blue cloud for each immersive headset, but the blue clouds will not be above the headsets, as the headsets are not trying to find the same world coordinate space as the HoloLens devices.</span></span>

<span data-ttu-id="60749-317">Ce point dans le projet est une application de partage de relation contenant-contenue ; Il ne fait pas beaucoup et peut servir d’une ligne de base.</span><span class="sxs-lookup"><span data-stu-id="60749-317">This point in the project is a contained sharing application; it doesn't do very much, and could act as a baseline.</span></span> <span data-ttu-id="60749-318">Dans les chapitres suivants, nous allons commencer la création d’une expérience pour les personnes de profiter.</span><span class="sxs-lookup"><span data-stu-id="60749-318">In the next chapters, we will start building an experience for people to enjoy.</span></span> <span data-ttu-id="60749-319">Pour obtenir davantage de conseils sur la conception de l’expérience partagée, cliquez ici.</span><span class="sxs-lookup"><span data-stu-id="60749-319">To get further guidance on shared experience design, go here.</span></span>

## <a name="chapter-4---immersion-and-teleporting"></a><span data-ttu-id="60749-320">Chapitre 4 - Immersion et teleporting</span><span class="sxs-lookup"><span data-stu-id="60749-320">Chapter 4 - Immersion and teleporting</span></span>

>[!VIDEO https://www.youtube.com/embed/kUHZ5tCOfvY]

### <a name="objectives"></a><span data-ttu-id="60749-321">Objectifs</span><span class="sxs-lookup"><span data-stu-id="60749-321">Objectives</span></span>

<span data-ttu-id="60749-322">Gérer l’expérience à chaque type d’unité de réalité mixte.</span><span class="sxs-lookup"><span data-stu-id="60749-322">Cater the experience to each type of mixed reality device.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="60749-323">Nous allons créer</span><span class="sxs-lookup"><span data-stu-id="60749-323">What we will build</span></span>

<span data-ttu-id="60749-324">Nous mettrons à jour l’application à mettre les utilisateurs casque immersives sur l’île avec une vue immersive.</span><span class="sxs-lookup"><span data-stu-id="60749-324">We will update the application to put immersive headset users on the island with an immersive view.</span></span> <span data-ttu-id="60749-325">HoloLens les utilisateurs auront toujours la vue générale de l’île.</span><span class="sxs-lookup"><span data-stu-id="60749-325">HoloLens users will still have the bird's eye view of the island.</span></span> <span data-ttu-id="60749-326">Les utilisateurs de chaque type d’appareil peuvent voir les autres utilisateurs telles qu’elles apparaissent dans le monde.</span><span class="sxs-lookup"><span data-stu-id="60749-326">Users of each device type can see other users as they appear in the world.</span></span> <span data-ttu-id="60749-327">Par exemple, les utilisateurs de casque immersives peuvent voir les autres les avatars sur d’autres chemins d’accès sur l’île, et ils voient les utilisateurs de HoloLens en tant que clouds giant au-dessus de l’île.</span><span class="sxs-lookup"><span data-stu-id="60749-327">For instance, immersive headset users can see the other avatars on other paths on the island, and they see the HoloLens users as giant clouds above the island.</span></span> <span data-ttu-id="60749-328">Casque immersives utilisateurs également voient le curseur de ray du pointage de regard de l’utilisateur HoloLens si l’utilisateur HoloLens consulte l’île.</span><span class="sxs-lookup"><span data-stu-id="60749-328">Immersive headset users will also see the cursor of the HoloLens user's gaze ray if the HoloLens user is looking at the island.</span></span> <span data-ttu-id="60749-329">HoloLens s’affiche un avatar sur l’île pour représenter chaque utilisateur immersives casque.</span><span class="sxs-lookup"><span data-stu-id="60749-329">HoloLens users will see an avatar on the island to represent each immersive headset user.</span></span>

<span data-ttu-id="60749-330">**Mise à jour d’entrée pour le périphérique Immersive :**</span><span class="sxs-lookup"><span data-stu-id="60749-330">**Updated Input for the Immersive device:**</span></span>
* <span data-ttu-id="60749-331">Les boutons d’animations et des pare-choc droite gauche sur le contrôleur Xbox faire pivoter le lecteur</span><span class="sxs-lookup"><span data-stu-id="60749-331">The left bumper and right bumper buttons on the Xbox controller rotate the player</span></span>
* <span data-ttu-id="60749-332">Maintenant le bouton de Y sur le contrôleur Xbox permettra une [teleport](navigating-the-windows-mixed-reality-home.md#getting-around-your-home) curseur.</span><span class="sxs-lookup"><span data-stu-id="60749-332">Holding the Y button on the Xbox controller will enable a [teleport](navigating-the-windows-mixed-reality-home.md#getting-around-your-home) cursor.</span></span> <span data-ttu-id="60749-333">Si le curseur a un indicateur de flèche ROTATIF lorsque vous relâchez le bouton de Y, vous serez teleported à l’emplacement du curseur.</span><span class="sxs-lookup"><span data-stu-id="60749-333">If the cursor has a spinning arrow indicator when you release the Y button, you will be teleported to the cursor's location.</span></span>

### <a name="steps"></a><span data-ttu-id="60749-334">Étapes</span><span class="sxs-lookup"><span data-stu-id="60749-334">Steps</span></span>
* <span data-ttu-id="60749-335">Ajouter MixedRealityTeleport à MixedRealityCameraParent</span><span class="sxs-lookup"><span data-stu-id="60749-335">Add MixedRealityTeleport to MixedRealityCameraParent</span></span>
    * <span data-ttu-id="60749-336">Dans **hiérarchie**, sélectionnez **Usland**.</span><span class="sxs-lookup"><span data-stu-id="60749-336">In **Hierarchy**, select **Usland**.</span></span>
    * <span data-ttu-id="60749-337">Dans **inspecteur**, activer **au niveau du contrôle**.</span><span class="sxs-lookup"><span data-stu-id="60749-337">In **Inspector**, enable **Level Control**.</span></span>
    * <span data-ttu-id="60749-338">Dans **hiérarchie**, sélectionnez **MixedRealityCameraParent**.</span><span class="sxs-lookup"><span data-stu-id="60749-338">In **Hierarchy**, select **MixedRealityCameraParent**.</span></span>
    * <span data-ttu-id="60749-339">Dans **inspecteur**, cliquez sur **ajouter un composant**.</span><span class="sxs-lookup"><span data-stu-id="60749-339">In **Inspector**, click **Add Component**.</span></span>
    * <span data-ttu-id="60749-340">Type **Teleport de réalité mixte** et sélectionnez-le.</span><span class="sxs-lookup"><span data-stu-id="60749-340">Type **Mixed Reality Teleport** and select it.</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="60749-341">Analyser le code</span><span class="sxs-lookup"><span data-stu-id="60749-341">Digging into the code</span></span>

<span data-ttu-id="60749-342">Les utilisateurs de casque immersives seront être attachés à leurs PC avec un câble, mais notre (île) est plus grand que le câble est long.</span><span class="sxs-lookup"><span data-stu-id="60749-342">Immersive headset users will be tethered to their PCs with a cable, but our island is larger than the cable is long.</span></span> <span data-ttu-id="60749-343">Pour compenser, nous avons besoin de la possibilité de déplacer la caméra indépendamment de mouvement de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="60749-343">To compensate, we need the ability to move the camera independently of the user's motion.</span></span> <span data-ttu-id="60749-344">Veuillez consulter la [page confirmation](comfort.md) pour plus d’informations sur la conception de votre application de réalité mixte (notamment personnel motion et locomotion).</span><span class="sxs-lookup"><span data-stu-id="60749-344">Please see the [comfort page](comfort.md) for more information about designing your mixed reality application (in particular self motion and locomotion).</span></span>

<span data-ttu-id="60749-345">Pour décrire ce processus, il sera utile de définir deux termes.</span><span class="sxs-lookup"><span data-stu-id="60749-345">In order to describe this process it will be useful to define two terms.</span></span> <span data-ttu-id="60749-346">Tout d’abord, **chariot** sera l’objet qui déplace la caméra indépendamment de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="60749-346">First, **dolly** will be the object that moves the camera independently from the user.</span></span> <span data-ttu-id="60749-347">Un objet de jeu d’enfant de la **chariot** sera le **caméra principale**.</span><span class="sxs-lookup"><span data-stu-id="60749-347">A child game object of the **dolly** will be the **main camera**.</span></span> <span data-ttu-id="60749-348">La caméra principale est attachée à la tête de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="60749-348">The main camera is attached to the user's head.</span></span>

<span data-ttu-id="60749-349">Dans le panneau de configuration de projet, accédez à **Assets\AppPrefabs\Support\Scripts\GameLogic** et double-cliquez sur **MixedRealityTeleport.cs**.</span><span class="sxs-lookup"><span data-stu-id="60749-349">In the project panel, navigate to **Assets\AppPrefabs\Support\Scripts\GameLogic** and double-click on **MixedRealityTeleport.cs**.</span></span>

<span data-ttu-id="60749-350">MixedRealityTeleport exécute deux tâches.</span><span class="sxs-lookup"><span data-stu-id="60749-350">MixedRealityTeleport has two jobs.</span></span> <span data-ttu-id="60749-351">Tout d’abord, il gère la rotation à l’aide des champignons.</span><span class="sxs-lookup"><span data-stu-id="60749-351">First, it handles rotation using the bumpers.</span></span> <span data-ttu-id="60749-352">Dans la fonction de mise à jour nous interrogent pour rechercher « ButtonUp' sur LeftBumper et RightBumper.</span><span class="sxs-lookup"><span data-stu-id="60749-352">In the update function we poll for 'ButtonUp' on LeftBumper and RightBumper.</span></span> <span data-ttu-id="60749-353">GetButtonUp uniquement retourne la valeur true sur la première image, qu'un bouton est relâché après avoir été arrêté.</span><span class="sxs-lookup"><span data-stu-id="60749-353">GetButtonUp only returns true on the first frame a button is up after having been down.</span></span> <span data-ttu-id="60749-354">Si l’un des boutons avaient été levée, nous savons que l’utilisateur a besoin pour faire pivoter.</span><span class="sxs-lookup"><span data-stu-id="60749-354">If either button had been raised, then we know the user needs to rotate.</span></span>

<span data-ttu-id="60749-355">Quand nous avons faites pivoter nous un fondu et fondu à l’aide d’un script simple appelé « contrôle de fondu ».</span><span class="sxs-lookup"><span data-stu-id="60749-355">When we rotate we do a fade out and fade in using a simple script called 'fade control'.</span></span> <span data-ttu-id="60749-356">Nous faisons cela pour empêcher l’utilisateur de voir un mouvement non naturels, ce qui peut entraîner une gêne.</span><span class="sxs-lookup"><span data-stu-id="60749-356">We do this to prevent the user from seeing an unnatural movement which could lead to discomfort.</span></span> <span data-ttu-id="60749-357">Le fondu et arrière effet est relativement simple.</span><span class="sxs-lookup"><span data-stu-id="60749-357">The fade in and out effect is fairly simple.</span></span> <span data-ttu-id="60749-358">Nous avons un quadruple noir négatif devant le **caméra principale**.</span><span class="sxs-lookup"><span data-stu-id="60749-358">We have a black quad hanging in front of the **main camera**.</span></span> <span data-ttu-id="60749-359">Lorsque le fondu faire passer la valeur alpha de 0 à 1.</span><span class="sxs-lookup"><span data-stu-id="60749-359">When fading out we transition the alpha value from 0 to 1.</span></span> <span data-ttu-id="60749-360">Cela entraîne progressivement les pixels noirs du quadruple pour afficher et masquer rien derrière les.</span><span class="sxs-lookup"><span data-stu-id="60749-360">This gradually causes the black pixels of the quad to render and obscure anything behind them.</span></span> <span data-ttu-id="60749-361">Lorsque le fondu dans faire passer la valeur alpha à zéro.</span><span class="sxs-lookup"><span data-stu-id="60749-361">When fading back in we transition the alpha value back to zero.</span></span>

<span data-ttu-id="60749-362">Lorsque nous calculons la rotation, notez que nous allons faire pivoter notre **chariot** , mais le calcul de la rotation autour de le **caméra principale**.</span><span class="sxs-lookup"><span data-stu-id="60749-362">When we calculate the rotation, note that we are rotating our **dolly** but calculating the rotation around the **main camera**.</span></span> <span data-ttu-id="60749-363">Il est important que loin le **caméra principale** s’éloigne de 0,0,0, moins précise une rotation autour du chariot deviendrait à partir du point de vue de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="60749-363">This is important as the farther the **main camera** is away from 0,0,0, the less accurate a rotation around the dolly would become from the point of view of the user.</span></span> <span data-ttu-id="60749-364">En fait, si vous ne sont pas en rotation autour de la position de la caméra, l’utilisateur passe un arc autour de la **chariot** plutôt que de la rotation.</span><span class="sxs-lookup"><span data-stu-id="60749-364">In fact, if you do not rotate around the camera position, the user will move on an arc around the **dolly** rather than rotating.</span></span>

<span data-ttu-id="60749-365">La deuxième tâche pour MixedRealityTeleport consiste à gérer le déplacement de la **chariot**.</span><span class="sxs-lookup"><span data-stu-id="60749-365">The second job for MixedRealityTeleport is to handle moving the **dolly**.</span></span> <span data-ttu-id="60749-366">Pour cela, utilisez SetWorldPosition.</span><span class="sxs-lookup"><span data-stu-id="60749-366">This is done in SetWorldPosition.</span></span> <span data-ttu-id="60749-367">SetWorldPosition prend la position souhaitée world, la position où l’utilisateur souhaite percieve qu’ils occupent.</span><span class="sxs-lookup"><span data-stu-id="60749-367">SetWorldPosition takes the desired world position, the position where the user wants to percieve that they inhabit.</span></span> <span data-ttu-id="60749-368">Nous devons placer notre **chariot** à cette position moins la position locale de la **caméra principale**, comme ce décalage sera ajouté à chaque frame.</span><span class="sxs-lookup"><span data-stu-id="60749-368">We need to put our **dolly** at that position minus the local position of the **main camera**, as that offset will be added each frame.</span></span>

<span data-ttu-id="60749-369">Un deuxième script appelle SetWorldPosition.</span><span class="sxs-lookup"><span data-stu-id="60749-369">A second script calls SetWorldPosition.</span></span> <span data-ttu-id="60749-370">Examinons ce script.</span><span class="sxs-lookup"><span data-stu-id="60749-370">Let's look at that script.</span></span> <span data-ttu-id="60749-371">Dans le panneau de configuration de projet, accédez à **Assets\AppPrefabs\Support\Scripts\GameLogic** et double-cliquez sur **TeleportScript.cs**.</span><span class="sxs-lookup"><span data-stu-id="60749-371">In the project panel, navigate to **Assets\AppPrefabs\Support\Scripts\GameLogic** and double-click on **TeleportScript.cs**.</span></span>

<span data-ttu-id="60749-372">Ce script est un peu plus complexe que MixedRealityTeleport.</span><span class="sxs-lookup"><span data-stu-id="60749-372">This script is a little more involved than MixedRealityTeleport.</span></span> <span data-ttu-id="60749-373">Le script est la vérification du bouton de Y sur le contrôleur de la Xbox à être maintenu enfoncé.</span><span class="sxs-lookup"><span data-stu-id="60749-373">The script is checking for the Y Button on the Xbox controller to be held down.</span></span> <span data-ttu-id="60749-374">Alors que le bouton est maintenu vers le bas un teleport curseur s’affiche et le script effectue un cast d’un rayon à partir de la position du pointage de regard de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="60749-374">While the button is held down a teleport cursor is rendered and the script casts a ray from the user's gaze position.</span></span> <span data-ttu-id="60749-375">Si ce rayon est en conflit avec une surface qui est plus ou moins pointant vers le haut, la surface sera considérée comme une bonne surface à teleport à, et l’animation sur le curseur teleport sera activée.</span><span class="sxs-lookup"><span data-stu-id="60749-375">If that ray collides with a surface that is more or less pointing up, the surface will be considered a good surface to teleport to, and the animation on the teleport cursor will be enabled.</span></span> <span data-ttu-id="60749-376">Si le rayon n’entre pas en conflit avec une surface plus ou moins pointage haut, l’animation sur le curseur sera désactivée.</span><span class="sxs-lookup"><span data-stu-id="60749-376">If the ray does not collide with a surface more or less pointing up, then the animation on the cursor will be disabled.</span></span> <span data-ttu-id="60749-377">Lorsque le bouton Y est publié et le point calculé du rayon est une position valide, le script appelle SetWorldPosition avec la position d’une intersection le rayon.</span><span class="sxs-lookup"><span data-stu-id="60749-377">When the Y button is released and the calculated point of the ray is a valid position, the script calls SetWorldPosition with the position the ray intersected.</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="60749-378">Profitez de votre progression</span><span class="sxs-lookup"><span data-stu-id="60749-378">Enjoy your progress</span></span>

<span data-ttu-id="60749-379">Cette fois, vous devez rechercher un ami.</span><span class="sxs-lookup"><span data-stu-id="60749-379">This time you'll need to find a friend.</span></span>

<span data-ttu-id="60749-380">Une fois encore, un utilisateur avec le HoloLens hébergera une session.</span><span class="sxs-lookup"><span data-stu-id="60749-380">Once again, a user with the HoloLens will host a session.</span></span> <span data-ttu-id="60749-381">La session se connectent aux autres utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="60749-381">Other users will join the session.</span></span> <span data-ttu-id="60749-382">L’application place les trois premiers utilisateurs à rejoindre dans un casque immersif sur l’un des trois chemins sur l’île.</span><span class="sxs-lookup"><span data-stu-id="60749-382">The application will place the first three users to join from an immersive headset on one of the three paths on the island.</span></span> <span data-ttu-id="60749-383">N’hésitez pas à Explorer l’île dans cette section.</span><span class="sxs-lookup"><span data-stu-id="60749-383">Feel free to explore the island in this section.</span></span>

<span data-ttu-id="60749-384">Détails à noter :</span><span class="sxs-lookup"><span data-stu-id="60749-384">Details to notice:</span></span>
1. <span data-ttu-id="60749-385">Vous pouvez voir les visages dans les clouds, qui permet à un utilisateur immergé voir la direction dans laquelle un utilisateur HoloLens recherche.</span><span class="sxs-lookup"><span data-stu-id="60749-385">You can see faces in the clouds, which helps an immersed user see which direction a HoloLens user is looking.</span></span>
2. <span data-ttu-id="60749-386">Les avatars sur l’île ont d’étranglement qui assurent la rotation.</span><span class="sxs-lookup"><span data-stu-id="60749-386">The avatars on the island have necks that rotate.</span></span> <span data-ttu-id="60749-387">Ils ne suivent pas ce que fait l’utilisateur est une réalité réelle (nous n’avons pas ces informations), mais rend la pour une expérience agréable.</span><span class="sxs-lookup"><span data-stu-id="60749-387">They won't follow what the user is doing is real reality (we don't have that information) but it makes for a nice experience.</span></span>
3. <span data-ttu-id="60749-388">Si l’utilisateur HoloLens consulte l’île, les utilisateurs immergés peuvent voir leur curseur.</span><span class="sxs-lookup"><span data-stu-id="60749-388">If the HoloLens user is looking at the Island, the immersed users can see their cursor.</span></span>
4. <span data-ttu-id="60749-389">Les clouds qui représentent les utilisateurs HoloLens les ombres portées.</span><span class="sxs-lookup"><span data-stu-id="60749-389">The clouds that represent the HoloLens users cast shadows.</span></span>

## <a name="chapter-5---finale"></a><span data-ttu-id="60749-390">Chapitre 5 - Finale</span><span class="sxs-lookup"><span data-stu-id="60749-390">Chapter 5 - Finale</span></span>

>[!VIDEO https://www.youtube.com/embed/n_HDWJbfpNg]

### <a name="objectives"></a><span data-ttu-id="60749-391">Objectifs</span><span class="sxs-lookup"><span data-stu-id="60749-391">Objectives</span></span>

<span data-ttu-id="60749-392">Créer une expérience interactive de collaboration entre les types d’appareils de deux.</span><span class="sxs-lookup"><span data-stu-id="60749-392">Create a collaborative interactive experience between the two device types.</span></span>

### <a name="what-we-will-build"></a><span data-ttu-id="60749-393">Nous allons créer</span><span class="sxs-lookup"><span data-stu-id="60749-393">What we will build</span></span>

<span data-ttu-id="60749-394">S’appuyant sur le chapitre 4, lorsqu’un utilisateur avec un casque immersif obtient près un puzzle sur l’île, les utilisateurs de HoloLens obtiendra une info-bulle avec un indice du puzzle.</span><span class="sxs-lookup"><span data-stu-id="60749-394">Building on chapter 4, when a user with an immersive headset gets near a puzzle on the island, the HoloLens users will get a tool tip with a clue to the puzzle.</span></span> <span data-ttu-id="60749-395">Une fois tous les utilisateurs de casque immersives au-delà de leurs puzzles et sur le « panneau prêt » dans la salle de fusée, lance le rocket.</span><span class="sxs-lookup"><span data-stu-id="60749-395">Once all of the immersive headset users get past their puzzles and onto the "ready pad" in the rocket room, the rocket will launch.</span></span>

### <a name="steps"></a><span data-ttu-id="60749-396">Étapes</span><span class="sxs-lookup"><span data-stu-id="60749-396">Steps</span></span>
* <span data-ttu-id="60749-397">Dans **hiérarchie**, sélectionnez **Usland**.</span><span class="sxs-lookup"><span data-stu-id="60749-397">In **Hierarchy**, select **Usland**.</span></span>
* <span data-ttu-id="60749-398">Dans **inspecteur**, dans **au niveau du contrôle**, vérifiez **Collaboration activer**.</span><span class="sxs-lookup"><span data-stu-id="60749-398">In **Inspector**, in **Level Control**, check **Enable Collaboration**.</span></span>

### <a name="digging-into-the-code"></a><span data-ttu-id="60749-399">Analyser le code</span><span class="sxs-lookup"><span data-stu-id="60749-399">Digging into the code</span></span>

<span data-ttu-id="60749-400">Maintenant examinons LevelControl.cs.</span><span class="sxs-lookup"><span data-stu-id="60749-400">Now let us look at LevelControl.cs.</span></span> <span data-ttu-id="60749-401">Ce script est au cœur de la logique de jeu et conserve l’état du jeu.</span><span class="sxs-lookup"><span data-stu-id="60749-401">This script is the core of the game logic and maintains the game state.</span></span> <span data-ttu-id="60749-402">Dans la mesure où il s’agit d’un jeu multijoueur à l’aide de UNET, nous devons comprendre le flux des données, au moins suffisamment bien pour modifier ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="60749-402">Since this is a multiplayer game using UNET we need to understand how data flows, at least well enough to modify this tutorial.</span></span> <span data-ttu-id="60749-403">Pour une présentation plus complète de UNET, reportez-vous à la documentation de Unity.</span><span class="sxs-lookup"><span data-stu-id="60749-403">For a more complete overview of UNET, please refer to Unity's documentation.</span></span>

<span data-ttu-id="60749-404">Dans le panneau de configuration de projet, accédez à **Assets\AppPrefabs\Support\Scripts\GameLogic** et double-cliquez sur **LevelControl.cs**.</span><span class="sxs-lookup"><span data-stu-id="60749-404">In the project panel, navigate to **Assets\AppPrefabs\Support\Scripts\GameLogic** and double-click on **LevelControl.cs**.</span></span>

<span data-ttu-id="60749-405">Nous devons comprendre comment un casque immersif indique qu’ils sont prêts pour le lancement de fusée.</span><span class="sxs-lookup"><span data-stu-id="60749-405">Let us understand how an immersive headset indicates that they are ready for the rocket launch.</span></span> <span data-ttu-id="60749-406">Préparation du lancement de fusée est communiquée en définissant une des trois booléennes dans une liste de booléennes qui correspondent aux trois chemins sur l’île.</span><span class="sxs-lookup"><span data-stu-id="60749-406">Rocket Launch readiness is communicated by setting one of three bools in a list of bools that correspond to the three paths on the island.</span></span> <span data-ttu-id="60749-407">Valeur booléenne d’un chemin d’accès est défini lorsque l’utilisateur affecté pour le chemin d’accès est sur le pavé marron à l’intérieur de la salle de fusée.</span><span class="sxs-lookup"><span data-stu-id="60749-407">A path's bool will be set when the user assigned to the path is on top of the brown pad inside the rocket room.</span></span> <span data-ttu-id="60749-408">OK, maintenant aux détails.</span><span class="sxs-lookup"><span data-stu-id="60749-408">Okay, now to the details.</span></span>

<span data-ttu-id="60749-409">Nous allons commencer dans la fonction Update().</span><span class="sxs-lookup"><span data-stu-id="60749-409">We will start in the Update() function.</span></span> <span data-ttu-id="60749-410">Notez qu’il existe une fonction « tricher ».</span><span class="sxs-lookup"><span data-stu-id="60749-410">You will note that there is a 'cheat' function.</span></span> <span data-ttu-id="60749-411">Nous avons utilisé ce dans le développement pour tester le lancement de fusée et de réinitialiser la séquence.</span><span class="sxs-lookup"><span data-stu-id="60749-411">We used this in development to test the rocket launch and reset sequence.</span></span> <span data-ttu-id="60749-412">Il ne fonctionnera pas dans l’expérience des utilisateurs multiples.</span><span class="sxs-lookup"><span data-stu-id="60749-412">It won't work in the multi user experience.</span></span> <span data-ttu-id="60749-413">J’espère qu’au moment où que vous intérioriser les informations suivantes vous lui faire fonctionner.</span><span class="sxs-lookup"><span data-stu-id="60749-413">Hopefully by the time you internalize the following infromation you can make it work.</span></span> <span data-ttu-id="60749-414">Une fois que nous vérifions si nous devons tricher, nous vérifions si le lecteur local est plongé.</span><span class="sxs-lookup"><span data-stu-id="60749-414">After we check to see if we should cheat, we check to see if the local player is immersed.</span></span> <span data-ttu-id="60749-415">Nous souhaitons vous concentrer sur la façon dont nous trouver que nous sommes à l’objectif.</span><span class="sxs-lookup"><span data-stu-id="60749-415">We want to focus on how we find that we're at the goal.</span></span> <span data-ttu-id="60749-416">À l’intérieur d’if (immergé) vérifier, il existe un appel à CheckGoal masquage derrière le **EnableCollaboration** bool.</span><span class="sxs-lookup"><span data-stu-id="60749-416">Inside of the if (Immersed) check, there is a call to CheckGoal hiding behind the **EnableCollaboration** bool.</span></span> <span data-ttu-id="60749-417">Cela correspond à la case à cocher que vous avez coché tout en effectuant les étapes décrites dans ce chapitre.</span><span class="sxs-lookup"><span data-stu-id="60749-417">This corresponds to the checkbox you checked while completing the steps for this chapter.</span></span> <span data-ttu-id="60749-418">À l’intérieur de EnableCollaboration, nous voyons un appel à CheckGoal().</span><span class="sxs-lookup"><span data-stu-id="60749-418">Inside of EnableCollaboration we see a call to CheckGoal().</span></span>

<span data-ttu-id="60749-419">CheckGoal effectue quelques formules mathématiques pour voir si nous ne sont plus ou moins se trouvant sur le panneau.</span><span class="sxs-lookup"><span data-stu-id="60749-419">CheckGoal does some math to see if we are more or less standing on the pad.</span></span> <span data-ttu-id="60749-420">Lorsque nous sommes, nous Debug.Log « Arrivé à objectif », puis nous appeler « SendAtGoalMessage() ».</span><span class="sxs-lookup"><span data-stu-id="60749-420">When we are, we Debug.Log "Arrived at goal" and then we call 'SendAtGoalMessage()'.</span></span> <span data-ttu-id="60749-421">Dans SendAtGoalMessage, nous appelons playerController.SendAtGoal.</span><span class="sxs-lookup"><span data-stu-id="60749-421">In SendAtGoalMessage we call playerController.SendAtGoal.</span></span> <span data-ttu-id="60749-422">Pour vous faire gagner du temps, voici le code :</span><span class="sxs-lookup"><span data-stu-id="60749-422">To save you some time, here's the code:</span></span>

```cs
private void CmdSendAtGoal(int GoalIndex)
       {
           levelState.SetGoalIndex(GoalIndex);
       }
```

```cs
public void SendAtGoal(int GoalIndex)
       {
           if (isLocalPlayer)
           {
               Debug.Log("sending at goal " + GoalIndex);
               CmdSendAtGoal(GoalIndex);
           }
       }
```

<span data-ttu-id="60749-423">Notez que SendAtGoalMessage appelle CmdSendAtGoal, les appels levelState.SetGoalIndex, qui est de retour dans LevelControl.cs.</span><span class="sxs-lookup"><span data-stu-id="60749-423">Note that SendAtGoalMessage calls CmdSendAtGoal, which calls levelState.SetGoalIndex, which is back in LevelControl.cs.</span></span> <span data-ttu-id="60749-424">À première vue, cela semble étrange.</span><span class="sxs-lookup"><span data-stu-id="60749-424">At first glance this seems strange.</span></span> <span data-ttu-id="60749-425">Pourquoi ne pas simplement appeler SetGoalIndex plutôt que cette étrange de routage par le biais du contrôleur player ?</span><span class="sxs-lookup"><span data-stu-id="60749-425">Why not just call SetGoalIndex rather than this strange routing through the player controller?</span></span> <span data-ttu-id="60749-426">La raison est que nous sommes conformes au modèle de données QU'UNET utilise pour synchroniser les données. Pour empêcher tricher et écroulement, UNET nécessite que chaque objet possède un utilisateur qui a la possibilité de modifier les variables synchronisés.</span><span class="sxs-lookup"><span data-stu-id="60749-426">The reason is that we are conforming to the data model UNET uses to keep data in sync. To prevent cheating and thrashing, UNET requires that each object has a user who has authority to change the synchronized variables.</span></span> <span data-ttu-id="60749-427">En outre, seul l’hôte (l’utilisateur qui a démarré la session) peut modifier des données directement.</span><span class="sxs-lookup"><span data-stu-id="60749-427">Further, only the host (the user that started the session) can change data directly.</span></span> <span data-ttu-id="60749-428">Les utilisateurs qui ne sont pas l’ordinateur hôte, mais ont autorité, doivent envoyer une commande' ' à l’hôte, ce qui modifie la variable.</span><span class="sxs-lookup"><span data-stu-id="60749-428">Users who are not the host, but have authority, need to send a 'command' to the host which will change the variable.</span></span> <span data-ttu-id="60749-429">Par défaut l’hôte a autorité sur tous les objets, à l’exception de l’objet généré dynamiquement pour représenter l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="60749-429">By default the host has authority over all objects, except for the object spawned to represent the user.</span></span> <span data-ttu-id="60749-430">Dans notre cas, cet objet a le script playercontroller.</span><span class="sxs-lookup"><span data-stu-id="60749-430">In our case this object has the playercontroller script.</span></span> <span data-ttu-id="60749-431">Il existe un moyen pour demander l’autorité pour un objet et apporter des modifications, mais nous choisissons de tirer parti du fait que le contrôleur de lecteur dispose des commandes autorité et l’itinéraire personnels par le biais du contrôleur player.</span><span class="sxs-lookup"><span data-stu-id="60749-431">There is a way to request authority for an object and then make changes, but we choose to leverage the fact that the player controller has self authority and route commands through the player controller.</span></span>

<span data-ttu-id="60749-432">Autrement dit, lorsque nous avons constaté nous-mêmes à notre objectif, le joueur doit indiquer à l’hôte et l’hôte indiquera tout le monde.</span><span class="sxs-lookup"><span data-stu-id="60749-432">Said another way, when we've found ourselves at our goal, the player needs to tell the host, and the host will tell everyone else.</span></span>

<span data-ttu-id="60749-433">Dans LevelControl.cs examiner SetGoalIndex.</span><span class="sxs-lookup"><span data-stu-id="60749-433">Back in LevelControl.cs look at SetGoalIndex.</span></span> <span data-ttu-id="60749-434">Ici, nous définissons la valeur d’une valeur dans un synclist (AtGoal).</span><span class="sxs-lookup"><span data-stu-id="60749-434">Here we are setting the value of a value in a synclist (AtGoal).</span></span> <span data-ttu-id="60749-435">N’oubliez pas que nous sommes dans le contexte de l’hôte pendant que nous faisons cela.</span><span class="sxs-lookup"><span data-stu-id="60749-435">Remember that we are in the context of the host while we do this.</span></span> <span data-ttu-id="60749-436">Similaire à une commande, un appel RPC est que l’hôte peut émettre entraîne tous les clients d’exécuter du code.</span><span class="sxs-lookup"><span data-stu-id="60749-436">Similar to a command, an RPC is something the host can issue that will cause all clients to run some code.</span></span> <span data-ttu-id="60749-437">Ici, nous appelons « RpcCheckAllGoals ».</span><span class="sxs-lookup"><span data-stu-id="60749-437">Here we call 'RpcCheckAllGoals'.</span></span> <span data-ttu-id="60749-438">Chaque client individuellement vérifier a posteriori si tous les trois AtGoals sont définies et si tel est le cas, lancez le rocket.</span><span class="sxs-lookup"><span data-stu-id="60749-438">Each client will individually check to see if all three AtGoals are set, and if so, launch the rocket.</span></span>

### <a name="enjoy-your-progress"></a><span data-ttu-id="60749-439">Profitez de votre progression</span><span class="sxs-lookup"><span data-stu-id="60749-439">Enjoy your progress</span></span>

<span data-ttu-id="60749-440">S’appuyant sur le chapitre précédent, nous allons commencer la session en tant qu’avant.</span><span class="sxs-lookup"><span data-stu-id="60749-440">Building on the previous chapter, we will start the session as before.</span></span> <span data-ttu-id="60749-441">Cette fois que les utilisateurs dans le casque immersives obtenir la « porte » dans leur chemin d’accès, une info-bulle s’affiche que seuls les utilisateurs de HoloLens peuvent voir.</span><span class="sxs-lookup"><span data-stu-id="60749-441">This time as the users in the immersive headset get to the "door" on their path, a tooltip will appear that only the HoloLens users can see.</span></span> <span data-ttu-id="60749-442">Les utilisateurs de HoloLens sont responsables de la communication cet indice pour les utilisateurs dans le casque immersif.</span><span class="sxs-lookup"><span data-stu-id="60749-442">The HoloLens users are responsible for communicating this clue to the users in the immersive headset.</span></span> <span data-ttu-id="60749-443">Une fois que chaque avatar a échelonnée sur son panneau marron correspondant à l’intérieur du volcan, la rocket lancera espace.</span><span class="sxs-lookup"><span data-stu-id="60749-443">The rocket will launch to space once each avatar has stepped on its corresponding brown pad inside the volcano.</span></span> <span data-ttu-id="60749-444">La scène réinitialisera après 60 secondes, vous pouvez l’effectuer à nouveau.</span><span class="sxs-lookup"><span data-stu-id="60749-444">The scene will reset after 60 seconds so you can do it again.</span></span>

## <a name="see-also"></a><span data-ttu-id="60749-445">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="60749-445">See also</span></span>
* [<span data-ttu-id="60749-446">Entrée M. 213 : Contrôleurs de mouvement</span><span class="sxs-lookup"><span data-stu-id="60749-446">MR Input 213: Motion controllers</span></span>](mixed-reality-213.md)
